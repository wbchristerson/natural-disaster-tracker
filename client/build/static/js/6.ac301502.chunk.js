(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[6],{621:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(44),a=i(20),r=i(159),s=i(1),o=i.n(s),l=i(620),c=function(e){var t=e.name,i=e.text,s=Object(r.a)(e,["name","text"]),o=t?"https://coreui.io/react/docs/components/".concat(t):e.href;return Object(a.jsx)("div",{className:"card-header-actions",children:Object(a.jsx)(l.eb,Object(n.a)(Object(n.a)({},s),{},{href:o,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:Object(a.jsx)("small",{className:"text-muted",children:i||"docs"})}))})},d=o.a.memo(c)},622:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(624);function a(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n.a)(e,t):void 0}}},623:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(622);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return i}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},624:function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return n}))},629:function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return o})),i.d(t,"g",(function(){return l})),i.d(t,"h",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return h})),i.d(t,"n",(function(){return m})),i.d(t,"l",(function(){return f})),i.d(t,"j",(function(){return g})),i.d(t,"m",(function(){return b})),i.d(t,"k",(function(){return j})),i.d(t,"i",(function(){return p}));var n=i(623),a=i(622);var r="user_access_token",s="No data available from witness reports",o="observer_database_id";function l(e){var t,i=function(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=Object(a.a)(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw s}}}}(document.cookie.split(";"));try{for(i.s();!(t=i.n()).done;){var n=t.value.split("=");if((n[0]+"").trim()===e)return n[1]}}catch(r){i.e(r)}finally{i.f()}return""}function c(){return"https://sample-will.herokuapp.com"}function d(){return"https://sample-will.herokuapp.com"}function u(e){return e||s}function h(e){var t=Object(n.a)(e,2),i=t[0],a=t[1];return Math.abs(i)+"\xb0 "+(i>=0?"N":"S")+", "+(Math.abs(a)+"\xb0 "+(a>=0?"E":"W"))}function m(e){if(!/^\s*\d?\d:\d\d(:\d\d)?\s*$/.test(e))return!1;e.trim();var t=parseInt(":"==e.charAt(1)?e.slice(0,1):e.slice(0,2)),i=parseInt(":"==e.charAt(1)?e.slice(2,4):e.slice(3,5)),n=e.length>5?parseInt(":"==e.charAt(1)?e.slice(5,7):e.slice(6,8)):null;return 0<=t&&t<24&&0<=i&&i<60&&0<=n&&n<60}function f(e){return/^\s*\d+\s*$/.test(e)}function g(e){if(!/^\s*-?0*\d\d?\d?(\.\d*)?\s*$/.test(e))return!1;var t=parseInt(e);return-180<=t&&t<=180}function b(e,t,i){if(!/^\s*\d+\s*$/.test(e))return!1;var n=parseInt(e);return t<=n&&n<=i}function j(e){return/^\s*.*(\.jpg|\.jpeg|\.png)\s*$/.test(e)}function p(e){var t=e.trim();return 4==t.length?"0"+t+":00":5==t.length?t+":00":t}},689:function(e,t,i){"use strict";i.r(t);var n=i(20),a=i(162),r=i(163),s=i(165),o=i(164),l=i(1),c=i.n(l),d=i(620),u=i(625),h=(i(621),i(629)),m=function(e){Object(s.a)(i,e);var t=Object(o.a)(i);function i(e){var n;return Object(a.a)(this,i),(n=t.call(this,e)).state={informalName:"",officialName:"",disasterType:"",isOngoing:!1,latitude:"",longitude:"",isValidInformalName:!0,isValidOfficialName:!0,isValidDisasterType:!0,isValidLatitude:!0,isValidLongitude:!0},n.backEndHost=Object(h.f)(),n.frontEndHost=Object(h.h)(),n.disasterId=parseInt(n.props.location.search.substring(4)),n.originalInformalName="",n.originalOfficialName="",n.originalDisasterType="",n.originalIsOngoing=!1,n.originalLatitude="",n.originalLongitude="",n}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.backEndHost,"/api/disasters/").concat(this.disasterId)).then((function(e){return e.json()})).then((function(t){e.setState({informalName:t.informal_name,officialName:t.official_name,disasterType:t.disaster_type.charAt(0).toUpperCase()+t.disaster_type.slice(1),isOngoing:t.is_ongoing,latitude:t.location[0].toString(),longitude:t.location[1].toString()}),e.originalInformalName=t.informal_name,e.originalOfficialName=t.official_name,e.originalDisasterType=t.disaster_type.charAt(0).toUpperCase()+t.disaster_type.slice(1),e.originalIsOngoing=t.is_ongoing,e.originalLatitude=t.location[0].toString(),e.originalLongitude=t.location[1].toString()})).catch((function(t){console.log("Error fetching disaster with id ",e.disasterId),console.log(t)}))}},{key:"onInformalNameChange",value:function(e){this.setState({informalName:e.target.value})}},{key:"onOfficialNameChange",value:function(e){this.setState({officialName:e.target.value})}},{key:"onDisasterTypeChange",value:function(e){this.setState({disasterType:e.target.value})}},{key:"onIsOngoingChange",value:function(e){this.setState({isOngoing:!this.state.isOngoing})}},{key:"onLatitudeChange",value:function(e){this.setState({latitude:e.target.value})}},{key:"onLongitudeChange",value:function(e){this.setState({longitude:e.target.value})}},{key:"onSubmit",value:function(){var e=this;console.log("in onSubmit"),console.log(this.state.latitude),console.log(this.state.longitude);var t=!0,i=!0,n=!0,a=!0,r=!0,s=this.state,o=s.informalName,l=s.officialName,c=s.disasterType,d=s.isOngoing,u=s.latitude,m=s.longitude;if(""==o&&(t=!1),""==l&&(i=!1),"Please select"==c&&(n=!1),Object(h.j)(u)||(a=!1),Object(h.j)(m)||(r=!1),t&&i&&n&&a&&r){var f={id:this.disasterId};o.trim()!=this.originalInformalName&&(f.informal_name=o.trim()),l.trim()!=this.originalOfficialName&&(f.official_name=l.trim()),c.trim()!=this.originalDisasterType&&(f.disaster_type=c.charAt(0).toLowerCase()+c.slice(1)),d!=this.originalIsOngoing&&(f.is_ongoing=d),u!=this.originalLatitude&&(f.location_latitude=u),m!=this.originalLongitude&&(f.location_longitude=m),fetch("".concat(this.backEndHost,"/api/disasters"),{method:"PATCH",body:JSON.stringify(f),contentType:"application/json",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(h.g)(h.c)}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.originalInformalName=t.informal_name,e.originalOfficialName=t.official_name,e.originalDisasterType=t.disaster_type.charAt(0).toUpperCase()+t.disaster_type.slice(1),e.originalIsOngoing=t.is_ongoing,e.originalLatitude=t.location[0].toString(),e.originalLongitude=t.location[1].toString()})).catch((function(t){console.log("Error fetching disaster with id ",e.disasterId),console.log(t)}))}this.setState({isValidInformalName:t,isValidOfficialName:i,isValidDisasterType:n,isValidLatitude:a,isValidLongitude:r})}},{key:"resetDisasterForm",value:function(){this.setState({informalName:this.originalInformalName,officialName:this.originalOfficialName,disasterType:this.originalDisasterType,isOngoing:this.originalIsOngoing,latitude:this.originalLatitude,longitude:this.originalLongitude,isValidInformalName:!0,isValidOfficialName:!0,isValidDisasterType:!0,isValidLatitude:!0,isValidLongitude:!0})}},{key:"render",value:function(){var e=this.state,t=e.isValidInformalName,a=e.isValidOfficialName,r=e.isValidDisasterType,s=e.isValidLatitude,o=e.isValidLongitude;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(d.xb,{children:Object(n.jsx)(d.v,{xs:"12",children:Object(n.jsxs)(d.k,{children:[Object(n.jsxs)(d.o,{children:["Basic Form",Object(n.jsx)("small",{children:" Elements"})]}),Object(n.jsx)(d.l,{children:Object(n.jsxs)(d.K,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",children:[Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"text-input",children:"Informal Name"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[t&&Object(n.jsx)(d.T,{id:"text-input",name:"text-input",placeholder:"Text",value:this.state.informalName,onChange:this.onInformalNameChange.bind(this)}),!t&&Object(n.jsx)(d.T,{id:"text-input",invalid:!0,name:"text-input",placeholder:"Text",value:this.state.informalName,onChange:this.onInformalNameChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Informal name is blank or format is not recognized"}),Object(n.jsx)(d.M,{children:"The colloquial name of the disaster"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"text-input",children:"Official Name"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[a&&Object(n.jsx)(d.T,{id:"text-input",name:"text-input",placeholder:"Text",value:this.state.officialName,onChange:this.onOfficialNameChange.bind(this)}),!a&&Object(n.jsx)(d.T,{id:"text-input",invalid:!0,name:"text-input",placeholder:"Text",value:this.state.officialName,onChange:this.onOfficialNameChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Official name is blank or format is not recognized"}),Object(n.jsx)(d.M,{children:"The identifying name of the disaster"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"select",children:"Disaster Type"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[r&&Object(n.jsx)(d.yb,{custom:!0,name:"select",id:"select",value:this.state.disasterType,onChange:this.onDisasterTypeChange.bind(this),children:i.disasterTypes.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))}),!r&&Object(n.jsx)(d.yb,{invalid:!0,custom:!0,name:"select",id:"select",value:this.state.disasterType,onChange:this.onDisasterTypeChange.bind(this),children:i.disasterTypes.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))}),Object(n.jsx)(d.bb,{children:"No disaster type is selected"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{tag:"label",sm:"3",className:"col-form-label",children:"Disaster Ongoing"}),Object(n.jsx)(d.v,{sm:"1",children:Object(n.jsx)(d.Ib,{id:"add-disaster-ongoing-switch",className:"mr-1",color:"danger",shape:"pill",checked:this.state.isOngoing,onChange:this.onIsOngoingChange.bind(this)})}),Object(n.jsx)(d.v,{sm:"3",children:Object(n.jsx)(d.db,{htmlFor:"add-disaster-ongoing-switch",children:this.state.isOngoing?"Yes":"No"})})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"email-input",children:"Latitude"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[s&&Object(n.jsx)(d.T,{type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.latitude,onChange:this.onLatitudeChange.bind(this)}),!s&&Object(n.jsx)(d.T,{invalid:!0,type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.latitude,onChange:this.onLatitudeChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Provided latitude is blank or format is not recognized"}),Object(n.jsx)(d.M,{className:"help-block",children:"The latitude of the disaster"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"email-input",children:"Longitude"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[o&&Object(n.jsx)(d.T,{type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.longitude,onChange:this.onLongitudeChange.bind(this)}),!o&&Object(n.jsx)(d.T,{invalid:!0,type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.longitude,onChange:this.onLongitudeChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Provided longitude is blank or format is not recognized"}),Object(n.jsx)(d.M,{className:"help-block",children:"The longitude of the disaster"})]})]})]})}),Object(n.jsxs)(d.m,{children:[Object(n.jsxs)(d.f,{type:"submit",size:"sm",color:"primary",onClick:this.onSubmit.bind(this),children:[Object(n.jsx)(u.a,{name:"cil-scrubber"})," Submit"]}),Object(n.jsxs)(d.f,{type:"reset",size:"sm",color:"danger",onClick:this.resetDisasterForm.bind(this),children:[Object(n.jsx)(u.a,{name:"cil-ban"})," Reset"]})]})]})})})})}}]),i}(c.a.Component);m.disasterTypes=["Please select","Earthquake","Flood","Wildfire","Tornado","Hurricane","Tsunami","Landslide","Avalanche","Volcano","Other"],t.default=m}}]);
//# sourceMappingURL=6.ac301502.chunk.js.map