{"version":3,"sources":["views/added-pages/SingleDisasterDisplay.js"],"names":["SingleDisasterDisplay","props","state","page","average_severity","disaster_type","first_observance","id","location","search","substring","informal_name","is_ongoing","last_observance","num_reports","official_name","people_affected","reports","witnessReportFormVisible","newWitnessedDate","newWitnessedTime","newWitnessedNumPeople","newWitnessedLatitude","newWitnessedLongitude","newWitnessedSeverity","newWitnessedImageURL","newWitnessedComment","witnessedDateValid","witnessedTimeValid","witnessedNumPeopleValid","witnessedLatitudeValid","witnessedLongitudeValid","witnessedSeverityValid","witnessedImageURLValid","confirmationModalReportId","isModalOpen","isWitnessReportModalOpen","isDeletionModalOpen","authorizationFailure","showToast","showDeleteToast","backEndHost","getBackEndHost","frontEndHost","getFrontEndHost","disasterId","parseInt","this","fetchDisasterInformation","fetch","then","response","json","result","setState","catch","e","console","log","val","target","value","valueToInsert","length","isValidTime","isValidNonnegativeInteger","isValidGeographicCoordinate","isValidNonnegativeIntegerInRange","isValidImageURL","method","body","JSON","stringify","disaster_id","observer_id","getCookieWithKey","OBSERVER_DATABASE_ID_KEY","event_datetime","Date","getGeneralTimeFormat","severity","trim","image_url","comment","location_latitude","parseFloat","location_longitude","contentType","headers","USER_ACCESS_TOKEN_KEY","error","success","message","clearWitnessReportForm","userAccessToken","isLoggedOut","className","onClick","setWitnessReportFormVisible","getSignInRequirementWarningMessage","action","encType","row","md","htmlFor","xs","type","name","placeholder","onChange","onNewWitnessedDateChange","bind","invalid","required","onNewWitnessedTimeChange","onNewWitnessedNumPeopleChange","onNewWitnessedLatitudeChange","onNewWitnessedLongitudeChange","onNewWitnessedSeverityChange","onNewWitnessedImageURLChange","rows","onNewWitnesseedCommentChange","size","color","onNewWitnessReportSubmit","reportId","onModalClose","evt","Math","max","disasterDisplayData","disasterField","disasterValue","displayDisasterDataLine","toFixed","charAt","toUpperCase","slice","DEFAULT_DISASTER_FIELD_TEXT","formatLatitudeLongitude","active","map","data","block","show","getAddWitnessReportForm","report","index","sm","src","alt","user_photograph_url","username","href","initiateDeleteConfirmation","onClose","closeButton","onConfirmedDelete","onWitnessReportModalClose","getSignInRequirementsErrorMessage","onDeletionModalClose","getAdminPrivilegeOrOwnerErrorMessage","position","autohide","fade","align","activePage","pages","ceil","PAGE_SIZE","onActivePageChange","onSetCurrentPage","React","Component"],"mappings":"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","file":"static/js/9.e2c757a3.chunk.js","sourcesContent":["import React from 'react'\nimport {\n  CBadge,\n  CButton,\n  CCard,\n  CCardBody,\n  CCardFooter,\n  CCardHeader,\n  CCol,\n  CCollapse,\n  CForm,\n  CFormGroup,\n  CFormText,\n  CInvalidFeedback,\n  CTextarea,\n  CInput,\n  CLabel,\n  CRow,\n  CListGroup,\n  CListGroupItem,\n  CButtonClose,\n  CModal,\n  CModalHeader,\n  CModalBody,\n  CModalTitle,\n  CModalFooter,\n  CToaster,\n  CToast,\n  CToastHeader,\n  CToastBody,\n  CPagination,\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport { DEFAULT_DISASTER_FIELD_TEXT, displayDisasterDataLine, formatLatitudeLongitude, getBackEndHost, getFrontEndHost, isValidGeographicCoordinate,\n        isValidImageURL, isValidNonnegativeIntegerInRange, isValidNonnegativeInteger, isValidTime, getCookieWithKey, OBSERVER_DATABASE_ID_KEY, \n        getGeneralTimeFormat, USER_ACCESS_TOKEN_KEY, getSignInRequirementWarningMessage, getSignInRequirementsErrorMessage, PAGE_SIZE,\n        getAdminPrivilegeOrOwnerErrorMessage} from 'src/Utilities';\n\n\nclass SingleDisasterDisplay extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      average_severity: null,\n      disaster_type: null,\n      first_observance: null,\n      id: props.location.search.substring(4),\n      informal_name: null,\n      is_ongoing: false,\n      last_observance: null,\n      location: null,\n      num_reports: 0,\n      official_name: null,\n      people_affected: 0,\n      reports: [],\n      witnessReportFormVisible: false,\n\n      newWitnessedDate: \"\",\n      newWitnessedTime: \"\",\n      newWitnessedNumPeople: \"\",\n      newWitnessedLatitude: \"\",\n      newWitnessedLongitude: \"\",\n      newWitnessedSeverity: \"\",\n      newWitnessedImageURL: \"\",\n      newWitnessedComment: \"\",\n      witnessedDateValid: true,\n      witnessedTimeValid: true,\n      witnessedNumPeopleValid: true,\n      witnessedLatitudeValid: true,\n      witnessedLongitudeValid: true,\n      witnessedSeverityValid: true,\n      witnessedImageURLValid: true,\n\n      confirmationModalReportId: null,\n      isModalOpen: false,\n      isWitnessReportModalOpen: false,\n      isDeletionModalOpen: false,\n      authorizationFailure: null,\n      showToast: false,\n      showDeleteToast: false,\n    };\n    this.backEndHost = getBackEndHost();\n    this.frontEndHost = getFrontEndHost();\n    this.disasterId = parseInt(this.props.location.search.substring(4));\n  }\n\n  componentDidMount() {\n    this.fetchDisasterInformation(this.disasterId, this.state.page);\n  }\n\n  fetchDisasterInformation(disasterId, page) {\n    fetch(`${this.backEndHost}/api/disasters/${disasterId}?page=${page}`)\n    .then(response => response.json())\n    .then(result => {\n        this.setState({\n          average_severity: result.average_severity,\n          disaster_type: result.disaster_type,\n          first_observance: result.first_observance,\n          last_observance: result.last_observance,\n          informal_name: result.informal_name,\n          is_ongoing: result.is_ongoing,\n          location: result.location,\n          num_reports: result.num_reports,\n          official_name: result.official_name,\n          people_affected: result.people_affected,\n          reports: result.reports,\n        })\n    })\n    .catch(e => {\n        console.log(\"Error fetching disaster with id \", disasterId);\n        console.log(e);\n    });\n  }\n\n  setWitnessReportFormVisible(val) {\n    this.setState({\n      witnessReportFormVisible: val,\n    });\n  }\n\n  onNewWitnessedDateChange(val) {\n    this.setState({\n      newWitnessedDate: val.target.value,\n    });\n  }\n\n  onNewWitnessedTimeChange(val) {\n    this.setState({\n      newWitnessedTime: val.target.value,\n    });\n  }\n\n  onNewWitnessedNumPeopleChange(val) {\n    this.setState({\n      newWitnessedNumPeople: val.target.value,\n    });\n  }\n\n  onNewWitnessedLatitudeChange(val) {\n    this.setState({\n      newWitnessedLatitude: val.target.value,\n    });\n  }\n\n  onNewWitnessedLongitudeChange(val) {\n    this.setState({\n      newWitnessedLongitude: val.target.value,\n    });\n  }\n\n  onNewWitnessedSeverityChange(val) {\n    this.setState({\n      newWitnessedSeverity: val.target.value,\n    });\n  }\n\n  onNewWitnessedImageURLChange(val) {\n    let valueToInsert = val.target.value;\n    if (valueToInsert.length > 250) {\n      valueToInsert = valueToInsert.substring(0, 250);\n    }\n    this.setState({\n      newWitnessedImageURL: valueToInsert,\n    });\n  }\n\n  onNewWitnesseedCommentChange(val) {\n    let valueToInsert = val.target.value;\n    if (valueToInsert.length > 500) {\n      valueToInsert = valueToInsert.substring(0, 500);\n    }\n    this.setState({\n      newWitnessedComment: valueToInsert,\n    });\n  }\n\n  clearWitnessReportForm() {\n    this.setState({\n      newWitnessedDate: \"\",\n      newWitnessedTime: \"\",\n      newWitnessedNumPeople: \"\",\n      newWitnessedLatitude: \"\",\n      newWitnessedLongitude: \"\",\n      newWitnessedSeverity: \"\",\n      newWitnessedImageURL: \"\",\n      newWitnessedComment: \"\",\n      witnessedDateValid: true,\n      witnessedTimeValid: true,\n      witnessedNumPeopleValid: true,\n      witnessedLatitudeValid: true,\n      witnessedLongitudeValid: true,\n      witnessedSeverityValid: true,\n      witnessedImageURLValid: true,\n    });\n  }\n\n  onNewWitnessReportSubmit() {\n    const {\n      id,\n      newWitnessedDate,\n      newWitnessedTime,\n      newWitnessedNumPeople,\n      newWitnessedLatitude,\n      newWitnessedLongitude,\n      newWitnessedSeverity,\n      newWitnessedImageURL,\n      newWitnessedComment,\n    } = this.state;\n\n    let\n      witnessedDateValid = true,\n      witnessedTimeValid = true,\n      witnessedNumPeopleValid = true,\n      witnessedLatitudeValid = true,\n      witnessedLongitudeValid = true,\n      witnessedSeverityValid = true,\n      witnessedImageURLValid = true;\n\n    if (newWitnessedDate === \"\") {\n      witnessedDateValid = false;\n    }\n\n    if (!isValidTime(newWitnessedTime)) {\n      witnessedTimeValid = false;\n    }\n\n    if (!isValidNonnegativeInteger(newWitnessedNumPeople)) {\n      witnessedNumPeopleValid = false;\n    }\n\n    if (!isValidGeographicCoordinate(newWitnessedLatitude)) {\n      witnessedLatitudeValid = false;\n    }\n\n    if (!isValidGeographicCoordinate(newWitnessedLongitude)) {\n      witnessedLongitudeValid = false;\n    }\n\n    if (newWitnessedSeverity !== \"\" && !isValidNonnegativeIntegerInRange(newWitnessedSeverity, 0, 10)) {\n      witnessedSeverityValid = false;\n    }\n\n    if (newWitnessedImageURL !== \"\" && !isValidImageURL(newWitnessedImageURL)) {\n      witnessedImageURLValid = false;\n    }\n\n    this.setState({\n      witnessedDateValid,\n      witnessedTimeValid,\n      witnessedNumPeopleValid,\n      witnessedLatitudeValid,\n      witnessedLongitudeValid,\n      witnessedSeverityValid,\n      witnessedImageURLValid,\n    });\n\n    if (\n      witnessedDateValid && witnessedTimeValid && witnessedNumPeopleValid && \n      witnessedLatitudeValid && witnessedLongitudeValid && witnessedSeverityValid &&\n      witnessedImageURLValid) {\n\n      this.setState({\n        showToast: false,\n      });\n      \n      // send creation request\n      fetch(`${this.backEndHost}/api/witnessreports`,\n        {\n          method: 'POST',\n          body: JSON.stringify({\n            disaster_id: this.state.id,\n            observer_id: getCookieWithKey(OBSERVER_DATABASE_ID_KEY),\n            event_datetime: new Date(newWitnessedDate + \"T\" + getGeneralTimeFormat(newWitnessedTime)),\n            severity: newWitnessedSeverity ? parseInt(newWitnessedSeverity.trim()) : null,\n            image_url: newWitnessedImageURL ? newWitnessedImageURL.trim() : null,\n            comment: newWitnessedComment ? newWitnessedComment.trim() : null,\n            people_affected: parseInt(newWitnessedNumPeople.trim()),\n            location_latitude: parseFloat(newWitnessedLatitude.trim()),\n            location_longitude: parseFloat(newWitnessedLongitude.trim()),\n          }),\n          contentType: 'application/json',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getCookieWithKey(USER_ACCESS_TOKEN_KEY),\n          }\n        }\n      )\n      .then(response => response.json())\n      .then((result) => {\n        if (result.error === 401 && !result.success && result.message === \"authorization issue - 401 Unauthorized: \" +\n          \"The server could not verify that you are authorized to access the URL requested. You either supplied \" +\n          \"the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the \" +\n          \"credentials required.\") {\n          \n          this.setState({\n            authorizationFailure: 401,\n            isWitnessReportModalOpen: true,\n          });\n        } else {\n          this.clearWitnessReportForm();\n          this.setState({\n            witnessReportFormVisible: false,\n          });\n          this.fetchDisasterInformation(this.state.id, 1);\n          if (!result.error) {\n            this.setState({\n              showToast: true,\n              page: 1,\n            });\n          }\n        }\n      })\n      .catch(e => {\n          console.log(\"Error fetching disaster with id \", id);\n          console.log(e);\n      });\n    }\n  }\n\n\n  getAddWitnessReportForm() {\n    const {\n      newWitnessedDate, newWitnessedTime,\n      witnessedDateValid, witnessedTimeValid, witnessedNumPeopleValid, witnessedLatitudeValid,\n      witnessedLongitudeValid, witnessedSeverityValid, witnessedImageURLValid} = this.state;\n    const userAccessToken = getCookieWithKey(USER_ACCESS_TOKEN_KEY);\n    const isLoggedOut = !userAccessToken || userAccessToken === \"\";\n    return (\n      <CCard>\n        <CCardHeader>\n          <div className=\"individual-disaster-header-block\">\n            <h4 className=\"with-no-bottom-margin\">New Witness Report</h4>\n            <CButtonClose onClick={() => this.setWitnessReportFormVisible(false)}/>\n          </div>\n          {isLoggedOut && <div className=\"top-information-text\">{getSignInRequirementWarningMessage(\"add witness reports\")}</div>}\n        </CCardHeader>\n        <CCardBody>\n          <CForm action=\"\" method=\"post\" encType=\"multipart/form-data\" className=\"form-horizontal\">\n            \n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"date-input\">Date Witnessed</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedDateValid && <CInput type=\"date\" id=\"date-input\" name=\"date-input\" placeholder=\"date\" value={newWitnessedDate} onChange={this.onNewWitnessedDateChange.bind(this)} />}\n                {!witnessedDateValid && <CInput invalid type=\"date\" id=\"date-input\" name=\"date-input\" placeholder=\"date\" value={newWitnessedDate} onChange={this.onNewWitnessedDateChange.bind(this)} />}\n                <CInvalidFeedback>Date provided is blank</CInvalidFeedback>\n                <CFormText>Date of the report</CFormText>\n              </CCol>\n            </CFormGroup>\n            \n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"time-text-input\">Time (HH:MM:SS)</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedTimeValid && <CInput required id=\"time-text-input\" name=\"time-text-input\" placeholder=\"HH:MM:SS\" onChange={this.onNewWitnessedTimeChange.bind(this)} value={newWitnessedTime}/>}\n                {!witnessedTimeValid && <CInput required invalid id=\"time-text-input\" name=\"time-text-input\" placeholder=\"HH:MM:SS\" onChange={this.onNewWitnessedTimeChange.bind(this)} value={newWitnessedTime}/>}\n                <CInvalidFeedback>Time provided is blank or format is not recognized</CInvalidFeedback>\n                <CFormText>Time of the disaster in hours, minutes, and optional seconds format</CFormText>\n              </CCol>\n            </CFormGroup>\n\n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"people-affected-text-input\">Number Of People Affected</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedNumPeopleValid && <CInput id=\"people-affected-text-input\" name=\"people-affected-text-input\" placeholder=\"0\" onChange={this.onNewWitnessedNumPeopleChange.bind(this)} value={this.state.newWitnessedNumPeople}/>}\n                {!witnessedNumPeopleValid && <CInput invalid id=\"people-affected-text-input\" name=\"people-affected-text-input\" placeholder=\"0\" onChange={this.onNewWitnessedNumPeopleChange.bind(this)} value={this.state.newWitnessedNumPeople}/>}\n                <CInvalidFeedback>Number of people affected is blank or format is not recognized</CInvalidFeedback>\n                <CFormText>Estimate of number of people affected</CFormText>\n              </CCol>\n            </CFormGroup>\n\n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"latitude-text-input\">Location Latitude</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedLatitudeValid && <CInput id=\"latitude-text-input\" name=\"latitude-text-input\" placeholder=\"0.00\" onChange={this.onNewWitnessedLatitudeChange.bind(this)} value={this.state.newWitnessedLatitude} />}\n                {!witnessedLatitudeValid && <CInput invalid id=\"latitude-text-input\" name=\"latitude-text-input\" placeholder=\"0.00\" onChange={this.onNewWitnessedLatitudeChange.bind(this)} value={this.state.newWitnessedLatitude} />}\n                <CInvalidFeedback>Location latitude is blank or format is not recognized</CInvalidFeedback>\n                <CFormText>Signed latitude of disaster</CFormText>\n              </CCol>\n            </CFormGroup>\n\n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"longitude-text-input\">Location Longitude</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedLongitudeValid && <CInput id=\"longitude-text-input\" name=\"longitude-text-input\" placeholder=\"0.00\" onChange={this.onNewWitnessedLongitudeChange.bind(this)} value={this.state.newWitnessedLongitude}/>}\n                {!witnessedLongitudeValid && <CInput invalid id=\"longitude-text-input\" name=\"longitude-text-input\" placeholder=\"0.00\" onChange={this.onNewWitnessedLongitudeChange.bind(this)} value={this.state.newWitnessedLongitude}/>}\n                <CInvalidFeedback>Location longitude is blank or format is not recognized</CInvalidFeedback>\n                <CFormText>Signed longitude of disaster</CFormText>\n              </CCol>\n            </CFormGroup>\n\n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"severity-text-input\">Severity (optional)</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedSeverityValid && <CInput id=\"severity-text-input\" name=\"severity-text-input\" placeholder=\"0\" onChange={this.onNewWitnessedSeverityChange.bind(this)} value={this.state.newWitnessedSeverity}/>}\n                {!witnessedSeverityValid && <CInput invalid id=\"severity-text-input\" name=\"severity-text-input\" placeholder=\"0\" onChange={this.onNewWitnessedSeverityChange.bind(this)} value={this.state.newWitnessedSeverity}/>}\n                <CInvalidFeedback>Format of severity is not recognized or out of range</CInvalidFeedback>\n                <CFormText>Severity of disaster on a scale of 0 to 10, integral values only</CFormText>\n              </CCol>\n            </CFormGroup>\n\n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"image-url-text-input\">Image URL (optional)</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                {witnessedImageURLValid && <CInput id=\"image-url-text-input\" name=\"image-url-text-input\" placeholder=\"Text\" onChange={this.onNewWitnessedImageURLChange.bind(this)} value={this.state.newWitnessedImageURL}/>}\n                {!witnessedImageURLValid && <CInput invalid id=\"image-url-text-input\" name=\"image-url-text-input\" placeholder=\"Text\" onChange={this.onNewWitnessedImageURLChange.bind(this)} value={this.state.newWitnessedImageURL}/>}\n                <CInvalidFeedback>Format of image URL is not recognized</CInvalidFeedback>\n                <CFormText>Image of disaster (must be hosted on Internet already)</CFormText>\n              </CCol>\n            </CFormGroup>\n\n            <CFormGroup row>\n              <CCol md=\"3\">\n                <CLabel htmlFor=\"textarea-input\">Comment (optional)</CLabel>\n              </CCol>\n              <CCol xs=\"12\" md=\"9\">\n                <CTextarea \n                  name=\"textarea-input\" \n                  id=\"textarea-input\" \n                  rows=\"9\"\n                  placeholder=\"Content...\"\n                  onChange={this.onNewWitnesseedCommentChange.bind(this)}\n                  value={this.state.newWitnessedComment}\n                />\n              </CCol>\n            </CFormGroup>            \n            \n          </CForm>\n        </CCardBody>\n        <CCardFooter>\n          <CButton type=\"submit\" size=\"sm\" color=\"primary\" onClick={this.onNewWitnessReportSubmit.bind(this)}><CIcon name=\"cil-scrubber\" /> Submit</CButton>\n          <CButton type=\"reset\" size=\"sm\" color=\"danger\" onClick={this.clearWitnessReportForm.bind(this)}><CIcon name=\"cil-ban\" /> Reset</CButton>\n        </CCardFooter>\n      </CCard>\n    );\n  }\n\n  initiateDeleteConfirmation(reportId) {\n    this.setState({\n      confirmationModalReportId: reportId,\n      isModalOpen: true,\n    });\n  }\n\n  onModalClose() {\n    this.setState({\n      confirmationModalReportId: null,\n      isModalOpen: false,\n    });\n  }\n\n  onWitnessReportModalClose() {\n    this.setState({\n      isWitnessReportModalOpen: false,\n    });\n  }\n\n  onDeletionModalClose() {\n    this.setState({\n      isDeletionModalOpen: false,\n      authorizationFailure: null,\n    });\n  }\n\n  onConfirmedDelete() {\n    this.setState({\n      showDeleteToast: false,\n    });\n    fetch(`${this.backEndHost}/api/witnessreports/${this.state.confirmationModalReportId}`,\n        {\n          method: 'DELETE',\n          contentType: 'application/json',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getCookieWithKey(USER_ACCESS_TOKEN_KEY),\n          }\n        }\n      )\n      .then(response => response.json())\n      .then(result => {\n        if (result.error === 401 && result.message === \"authorization issue - 401 Unauthorized: \" +\n          \"The server could not verify that you are authorized to access the URL requested. You \" + \n          \"either supplied the wrong credentials (e.g. a bad password), or your browser doesn't \" + \n          \"understand how to supply the credentials required.\" && !result.success) {\n          \n          this.setState({\n            isDeletionModalOpen: true,\n            authorizationFailure: 401,\n          });\n        } else if (result.error === 403 && result.message === \"authorization incorrect permission \" +\n          \"- 403 Forbidden: You don't have the permission to access the requested resource. It is \" +\n          \"either read-protected or not readable by the server.\" && !result.success) {\n          \n          this.setState({\n            isDeletionModalOpen: true,\n            authorizationFailure: 403,\n          });\n        } else {\n          this.onModalClose();\n          this.fetchDisasterInformation(this.disasterId, this.state.page);\n          if (!result.error) {\n            this.setState({\n              showDeleteToast: true,\n            });  \n          }\n        }\n\n      })\n      .catch(e => {\n          console.log(\"Error fetching disaster with id \", this.disasterId);\n          console.log(e);\n      });\n      this.onModalClose();\n  }\n\n  onSetCurrentPage(evt) {\n    this.setState({\n      page: Math.max(1, evt),\n    });\n    this.fetchDisasterInformation(this.disasterId, Math.max(1, evt));\n  }\n\n  render() {\n    const {average_severity, disaster_type, first_observance, last_observance, is_ongoing, location, num_reports,\n      people_affected, witnessReportFormVisible, authorizationFailure, showToast, showDeleteToast, page} = this.state;\n    const disasterDisplayData = [\n      { disasterField: \"Average Severity\", disasterValue: displayDisasterDataLine(average_severity ? average_severity.toFixed(2) : average_severity) },\n      { disasterField: \"Disaster Type\", disasterValue: disaster_type ? disaster_type.charAt(0).toUpperCase() + disaster_type.slice(1) : DEFAULT_DISASTER_FIELD_TEXT },\n      { disasterField: \"First Observance\", disasterValue: displayDisasterDataLine(first_observance) },\n      { disasterField: \"Last Observance\", disasterValue: displayDisasterDataLine(last_observance) },\n      { disasterField: \"Location\", disasterValue: location ? formatLatitudeLongitude(location) : DEFAULT_DISASTER_FIELD_TEXT },\n      { disasterField: \"Number Of Reports\", disasterValue: num_reports },\n      { disasterField: \"People Affected\", disasterValue: displayDisasterDataLine(people_affected) },\n    ];\n\n    return (\n      <>\n        <CRow className=\"single-disaster-container\">\n          <CCol xs=\"12\" className=\"single-disaster-card\">\n            <CCard>\n              <CCardHeader className=\"disaster-header\">\n                <CListGroup>\n                  <div className=\"card-header-actions\">\n                    <CBadge className=\"mr-1 float-right\" color={`${is_ongoing ? \"danger\" : \"success\"}`}>{`${is_ongoing ? \"On-Going\" : \"Not On-Going\"}`}</CBadge>\n                  </div>\n                  <CListGroupItem action active>\n                    <div className=\"individual-disaster-header-block\">\n                      <h2>{this.state.informal_name}</h2>\n                      <h2>{this.state.official_name}</h2>\n                    </div>\n                    <div className=\"individual-disaster-header-block\">\n                      <h6>Informal Name</h6>\n                      <h6>Official Name</h6>\n                    </div>\n                  </CListGroupItem>\n                </CListGroup>\n                \n              </CCardHeader>\n              <CCardBody>\n                {disasterDisplayData.map(data => (\n                  <CForm key={data.disasterField}>\n                    <CFormGroup row>\n                      <CCol md=\"3\" className=\"disaster-data-text\">\n                        <CLabel>{data.disasterField}</CLabel>\n                      </CCol>\n                      <CCol xs=\"12\" md=\"9\">\n                        <p className=\"form-control-static disaster-data-text\">{data.disasterValue}</p>\n                      </CCol>\n                    </CFormGroup>\n                  </CForm>\n                ))}\n\n                <CButton\n                  block\n                  className=\"btn btn-primary btn-lg btn-block inner-button\"\n                  color=\"primary\"\n                  onClick={() => this.setWitnessReportFormVisible(!witnessReportFormVisible)}>\n                    {witnessReportFormVisible ? \"Close Form\" : \"Add Witness Report\"}\n                </CButton>\n                <CCollapse className=\"with-top-padding\" show={witnessReportFormVisible}>\n                  {this.getAddWitnessReportForm()}\n                </CCollapse>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n\n        {this.state.reports.map((report, index) => {\n          console.log(report);\n          return (\n            <CRow key={index} className=\"single-disaster-container\">\n              <CCol xs=\"12\" sm=\"12\" md=\"12\" className=\"single-disaster-card\">\n                <CCard>\n                  <CCardBody className=\"witness-report-card-body\">\n                    {report.image_url && <img className=\"d-block w-100 set-disaster-max-height\" src={report.image_url} alt=\"disaster\"/>}\n                    {report.comment && <h3 className=\"witness-quote-statement\">{`\"${report.comment}\"`}</h3>}\n                    {report.comment && \n                      <div className=\"witness-quote-author\">\n                        <div className=\"c-avatar\">\n                          <img src={report.user_photograph_url} className=\"c-avatar-img\" alt={\"\"} />\n                        </div>\n                        {report.comment && <h5 className=\"disaster-author-text\">{report.username}</h5>}\n                      </div>\n                    }\n\n                    <CForm className=\"disaster-details-block\">\n                      {!report.comment &&\n                        <div className=\"disaster-display\">\n                          <CCol md=\"3\" className=\"disaster-data-text\">\n                            <CLabel>Observer</CLabel>\n                          </CCol>\n                          <CCol xs=\"12\" md=\"9\" className=\"observer-identifier-row\">\n                            <div className=\"c-avatar\">\n                              <img src={report.user_photograph_url} className=\"c-avatar-img\" alt={\"\"} />\n                            </div>\n                            <p className=\"witness-report-username-text\">{report.username}</p>\n                          </CCol>\n                        </div>\n                      }\n                      {report.severity &&\n                        <div className=\"disaster-display\">\n                          <CCol md=\"3\" className=\"disaster-data-text\">\n                            <CLabel>Severity</CLabel>\n                          </CCol>\n                          <CCol xs=\"12\" md=\"9\">\n                            <p className=\"disaster-data-text\">{report.severity}</p>\n                          </CCol>\n                        </div>\n                      }\n                      <div className=\"disaster-display\">\n                        <CCol md=\"3\" className=\"disaster-data-text\">\n                          <CLabel>Observance Time</CLabel>\n                        </CCol>\n                        <CCol xs=\"12\" md=\"9\">\n                          <p className=\"disaster-data-text\">{report.event_datetime}</p>\n                        </CCol>\n                      </div>\n                      <div className=\"disaster-display\">\n                        <CCol md=\"3\" className=\"disaster-data-text\">\n                          <CLabel>Location</CLabel>\n                        </CCol>\n                        <CCol xs=\"12\" md=\"9\">\n                          <p className=\"disaster-data-text\">{formatLatitudeLongitude(report.location)}</p>\n                        </CCol>\n                      </div>\n                      <div className=\"disaster-display\">\n                        <CCol md=\"3\" className=\"disaster-data-text\">\n                          <CLabel>People Affected</CLabel>\n                        </CCol>\n                        <CCol xs=\"12\" md=\"9\">\n                          <p className=\"disaster-data-text\">{report.people_affected}</p>\n                        </CCol>\n                      </div>\n                    </CForm>\n\n                    <div className=\"button-row\">\n                      <div className=\"auth0-box\">\n                        <a className=\"btn btn-primary\" href={`${this.frontEndHost}/#/edit-witness-report?id=${report.id}`}>Edit Witness Report</a>\n                      </div>\n                      <CButton color=\"primary\" onClick={() => this.initiateDeleteConfirmation(report.id)}>Delete Witness Report</CButton>\n                    </div>\n\n                  </CCardBody>\n                </CCard>\n              </CCol>\n            </CRow>\n          )\n        })}\n        <CModal show={this.state.isModalOpen} onClose={this.onModalClose.bind(this)}>\n          <CModalHeader closeButton>\n            <CModalTitle>Confirmation Of Deletion</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            Are you sure that you want to delete this witness report? The operation cannot be undone.\n          </CModalBody>\n          <CModalFooter>\n            <CButton onClick={this.onConfirmedDelete.bind(this)} color=\"primary\">Yes, delete it</CButton>{' '}\n            <CButton \n              color=\"secondary\" \n              onClick={() => this.onModalClose()}\n            >Cancel</CButton>\n          </CModalFooter>\n        </CModal>\n\n        <CModal show={this.state.isWitnessReportModalOpen} onClose={this.onWitnessReportModalClose.bind(this)}>\n          <CModalHeader closeButton>\n            <CModalTitle>Failure To Create Witness Report</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            {getSignInRequirementsErrorMessage(\"create witness reports\")}\n          </CModalBody>\n          <CModalFooter>\n            <CButton \n              color=\"secondary\" \n              onClick={this.onWitnessReportModalClose.bind(this)}\n            >OK</CButton>\n          </CModalFooter>\n        </CModal>\n\n        <CModal show={this.state.isDeletionModalOpen} onClose={this.onDeletionModalClose.bind(this)}>\n          <CModalHeader closeButton>\n            <CModalTitle>Failure To Delete Witness Report</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            {getAdminPrivilegeOrOwnerErrorMessage(\"delete witness reports\", authorizationFailure)}\n          </CModalBody>\n          <CModalFooter>\n            <CButton \n              color=\"secondary\" \n              onClick={this.onDeletionModalClose.bind(this)}\n            >OK</CButton>\n          </CModalFooter>\n        </CModal>\n\n        <CToaster\n          position={'top-center'}\n          key={'toaster-top-center'}\n        >\n          <CToast\n            key={'toast'}\n            show={showToast}\n            autohide={5000}\n            fade={true}\n          >\n            <CToastHeader closeButton={true}>\n              Witness Report Added\n            </CToastHeader>\n            <CToastBody>\n              {`The witness report was added successfully!`}\n            </CToastBody>\n          </CToast>\n        </CToaster>\n\n        <CToaster\n          position={'top-center'}\n          key={'delete-toaster-top-center'}\n        >\n          <CToast\n            key={'delete-toast'}\n            show={showDeleteToast}\n            autohide={5000}\n            fade={true}\n          >\n            <CToastHeader closeButton={true}>\n              Witness Report Deleted\n            </CToastHeader>\n            <CToastBody>\n              {`The witness report was deleted successfully!`}\n            </CToastBody>\n          </CToast>\n        </CToaster>\n\n        <CPagination\n          align=\"center\"\n          activePage={page}\n          pages={Math.ceil(num_reports / PAGE_SIZE)}\n          onActivePageChange={this.onSetCurrentPage.bind(this)}\n        />\n      </>\n    );\n  }\n}\n\nexport default SingleDisasterDisplay;"],"sourceRoot":""}