(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[10],{524:function(e,t,s){"use strict";s.r(t);var a=s(38),c=s(159),i=s(160),n=s(162),r=s(161),o=s(1),d=s.n(o),l=s(499),h=s(500),j=function(e){Object(n.a)(s,e);var t=Object(r.a)(s);function s(e){var a;Object(c.a)(this,s),a=t.call(this,e);var i=new Date;return a.state={totalDisasters:0,disasterList:[],page:1,recordedSeconds:i.getSeconds(),searchString:""},a.backEndHost=Object(h.m)(),a.frontEndHost=Object(h.p)(),a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.fetchDisasters(1)}},{key:"fetchDisasters",value:function(e){var t=this;fetch("".concat(this.backEndHost,"/api/disasters?page=").concat(e),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){t.setState({totalDisasters:e.total_disasters,disasterList:e.disasters})})).catch((function(e){console.log(e)}))}},{key:"onSearchStringChange",value:function(e){this.setState({searchString:e.target.value})}},{key:"onSearchClick",value:function(){var e=this.state.searchString;""===e?(this.fetchDisasters(1),this.setState({page:1})):this.fetchDisastersWithSearch(e,1)}},{key:"fetchDisastersWithSearch",value:function(e,t){var s=this;fetch("".concat(this.backEndHost,"/api/disasters?page=").concat(t,"&query=").concat(e),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){s.setState({totalDisasters:e.total_disasters,disasterList:e.disasters,page:t})})).catch((function(e){console.log(e)}))}},{key:"onSetCurrentPage",value:function(e){var t=Math.max(1,e);this.setState({page:t});var s=this.state.searchString;""===s?this.fetchDisasters(t):this.fetchDisastersWithSearch(s,t)}},{key:"render",value:function(){var e=this,t=this.state,s=t.recordedSeconds,c=t.searchString,i=t.disasterList,n=t.page,r=t.totalDisasters;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"my-test main-image-".concat(s%7+1),children:Object(a.jsxs)("div",{className:"card-overlay",children:[Object(a.jsx)("h1",{className:"display-3 main-top-text",children:"Disaster Reporter"}),Object(a.jsx)("p",{className:"main-bottom-text",children:"See And Write Reports About Natural Disasters In Your Area"})]})}),Object(a.jsxs)(l.J,{className:"single-disaster-container",children:[Object(a.jsxs)(l.j,{className:"single-disaster-card search-box",children:[Object(a.jsx)(l.x,{className:"top-search-field",placeholder:"Search",size:"lg",value:c,onChange:this.onSearchStringChange.bind(this)}),Object(a.jsx)(l.d,{color:"primary",onClick:function(){return e.onSearchClick(1)},className:"btn btn-primary btn-block top-search-button",type:"submit",children:"Search"})]}),Object(a.jsx)(l.j,{className:"logged-in-box auth0-box logged-in add-disaster-button",children:Object(a.jsx)("a",{className:"btn btn-primary btn-lg btn-logout btn-block",href:"".concat(this.frontEndHost,"/#/add-disaster-event"),children:"Add Disaster Event"})})]}),0===i.length&&Object(a.jsx)("h3",{className:"no-search-match-text",children:"No matching disasters"}),i.map((function(t,s){var c=Object(h.o)(t);return Object(a.jsx)(l.J,{className:"single-disaster-container",children:Object(a.jsx)(l.j,{xs:"12",className:"single-disaster-card",children:Object(a.jsxs)(l.f,{children:[Object(a.jsx)(l.i,{className:"disaster-header",children:Object(a.jsxs)(l.B,{children:[Object(a.jsx)("div",{className:"card-header-actions",children:Object(a.jsx)(l.a,{className:"mr-1 float-right",color:"".concat(t.is_ongoing?"danger":"success"),children:"".concat(t.is_ongoing?"On-Going":"Not On-Going")})}),Object(a.jsxs)(l.C,{action:!0,active:!0,children:[Object(a.jsxs)("div",{className:"individual-disaster-header-block",children:[Object(a.jsx)("h2",{children:t.informal_name}),Object(a.jsx)("h2",{children:t.official_name})]}),Object(a.jsxs)("div",{className:"individual-disaster-header-block",children:[Object(a.jsx)("h6",{children:"Informal Name"}),Object(a.jsx)("h6",{children:"Official Name"})]})]})]})}),Object(a.jsxs)(l.g,{className:"disaster-card-body",children:[t.random_observer_url&&Object(a.jsx)("img",{className:"d-block w-100 set-disaster-max-height",src:t.random_witness_image,alt:"slide 1"}),t.random_comment&&Object(a.jsx)("h3",{className:"witness-quote-statement",children:'"'.concat(t.random_comment,'"')}),t.random_comment&&Object(a.jsxs)("div",{className:"witness-quote-author",children:[Object(a.jsx)("div",{className:"c-avatar",children:Object(a.jsx)("img",{src:t.random_observer_url,className:"c-avatar-img",alt:""})}),t.random_comment&&Object(a.jsx)("h5",{className:"disaster-author-text",children:t.random_observer})]}),Object(a.jsx)(l.o,{className:"disaster-details-block",children:c.map((function(e,t){return Object(a.jsxs)("div",{className:"disaster-display",children:[Object(a.jsx)(l.j,{md:"3",className:"disaster-data-text",children:Object(a.jsx)(l.z,{children:e[0]})}),Object(a.jsx)(l.j,{xs:"12",md:"9",children:Object(a.jsx)("p",{className:"disaster-data-text",children:e[1]})})]},t)}))}),Object(a.jsxs)("div",{className:"button-row disaster-button-block",children:[Object(a.jsx)("div",{className:"auth0-box",children:Object(a.jsx)("a",{className:"btn btn-primary",href:"".concat(e.frontEndHost,"/#/single-disaster-display?id=").concat(t.id),children:"View Witness Reports"})}),Object(a.jsx)("div",{className:"auth0-box",children:Object(a.jsx)("a",{className:"btn btn-primary",href:"".concat(e.frontEndHost,"/#/edit-disaster-event?id=").concat(t.id),children:"Edit Disaster"})})]})]})]})})},s)})),Object(a.jsx)(l.I,{align:"center",activePage:n,pages:Math.ceil(r/h.d),onActivePageChange:this.onSetCurrentPage.bind(this)})]})}}]),s}(d.a.Component);t.default=j}}]);
//# sourceMappingURL=10.588f65d8.chunk.js.map