(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[6],{621:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(44),n=r(20),o=r(159),a=r(1),s=r.n(a),c=r(620),d=function(e){var t=e.name,r=e.text,a=Object(o.a)(e,["name","text"]),s=t?"https://coreui.io/react/docs/components/".concat(t):e.href;return Object(n.jsx)("div",{className:"card-header-actions",children:Object(n.jsx)(c.eb,Object(i.a)(Object(i.a)({},a),{},{href:s,rel:"noreferrer noopener",target:"_blank",className:"card-header-action",children:Object(n.jsx)("small",{className:"text-muted",children:r||"docs"})}))})},l=s.a.memo(d)},622:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(624);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},623:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(622);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(c){n=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return r}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},624:function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},627:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return u})),r.d(t,"i",(function(){return p})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return m})),r.d(t,"u",(function(){return b})),r.d(t,"s",(function(){return f})),r.d(t,"q",(function(){return g})),r.d(t,"t",(function(){return j})),r.d(t,"r",(function(){return v})),r.d(t,"l",(function(){return x})),r.d(t,"n",(function(){return y})),r.d(t,"m",(function(){return L})),r.d(t,"g",(function(){return S})),r.d(t,"h",(function(){return C})),r.d(t,"o",(function(){return T})),r.d(t,"p",(function(){return I}));var i=r(623),n=r(622);var o="user_access_token",a="No data available from witness reports",s="observer_database_id",c=["Please select","Earthquake","Flood","Wildfire","Tornado","Hurricane","Tsunami","Landslide","Avalanche","Volcano","Other"],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function l(e){var t,r=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Object(n.a)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}(document.cookie.split(";"));try{for(r.s();!(t=r.n()).done;){var i=t.value.split("=");if((i[0]+"").trim()===e)return i[1]}}catch(o){r.e(o)}finally{r.f()}return""}function u(){return"https://sample-will.herokuapp.com"}function p(){return"https://sample-will.herokuapp.com"}function h(e){return e||a}function m(e){var t=Object(i.a)(e,2),r=t[0],n=t[1];return Math.abs(r)+"\xb0 "+(r>=0?"N":"S")+", "+(Math.abs(n)+"\xb0 "+(n>=0?"E":"W"))}function b(e){if(!/^\s*\d?\d:\d\d(:\d\d)?\s*$/.test(e))return!1;e.trim();var t=parseInt(":"==e.charAt(1)?e.slice(0,1):e.slice(0,2)),r=parseInt(":"==e.charAt(1)?e.slice(2,4):e.slice(3,5)),i=e.length>5?parseInt(":"==e.charAt(1)?e.slice(5,7):e.slice(6,8)):null;return 0<=t&&t<24&&0<=r&&r<60&&0<=i&&i<60}function f(e){return/^\s*\d+\s*$/.test(e)}function g(e){if(!/^\s*-?0*\d\d?\d?(\.\d*)?\s*$/.test(e))return!1;var t=parseInt(e);return-180<=t&&t<=180}function j(e,t,r){if(!/^\s*\d+\s*$/.test(e))return!1;var i=parseInt(e);return t<=i&&i<=r}function v(e){return/^\s*.*(\.jpg|\.jpeg|\.png)\s*$/.test(e)}function x(e){var t=e.trim();return 4==t.length?"0"+t+":00":5==t.length?t+":00":t}function O(e){var t=e.split(" "),r=Object(i.a)(t,6),n=(r[0],r[1]),o=r[2],a=r[3],s=r[4],c=(r[5],s.split(":")),l=Object(i.a)(c,3),u=l[0],p=l[1],h=l[2],m=(d.indexOf(o)+1).toString()+"/"+n+"/"+a;return new Date(m+" "+(u+":"+p+":"+h+" UTC"))}function R(e,t){for(var r=e.toString(),i=r,n=0;n<t-r.length;n++)i="0"+i;return i}function y(e){var t=O(e);return R(t.getHours(),2)+":"+R(t.getMinutes(),2)+":"+R(t.getSeconds(),2)}function L(e){var t=O(e),r=R(t.getMonth()+1,2),i=R(t.getDate(),2);return R(t.getFullYear(),2)+"-"+r+"-"+i}function S(e,t){return"A failure occurred. The ability to ".concat(e," requires admin \n    privileges and it looks like those have not been granted to you. If you \n    would like admin privileges, please ").concat(401==t?"create an account by signing up (for free!) and":""," email me at \n    wbchristerson@gmail.com with your username.")}function C(e){var t=l(o);return"Please note that the ability to ".concat(e," requires admin privileges. If you do \n    not have admin privileges and would like them, please ").concat(t?"":"create an account by signing up (for free!) and"," email me at wbchristerson@gmail.com with\n    your username.")}function T(e){return"Note that you must be logged-in to ".concat(e,". If you do not \n    have an account, you can create one for free by signing up.")}function I(e){return"A failure occurred. You must be logged-in to ".concat(e,". You can\n     create an account (for free!) by signing up.")}},690:function(e,t,r){"use strict";r.r(t);var i=r(20),n=r(162),o=r(163),a=r(165),s=r(164),c=r(1),d=r.n(c),l=r(620),u=r(625),p=(r(621),r(627)),h=function(e){Object(a.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).state={reportDate:"",reportTime:"",reportSeverity:"",reportImageURL:"",reportComment:"",reportPeopleAffected:"",reportLatitude:"",reportLongitude:"",isValidReportDate:!0,isValidReportTime:!0,isValidReportSeverity:!0,isValidReportImageURL:!0,isValidReportPeopleAffected:!0,isValidReportLatitude:!0,isValidReportLongitude:!0,isModalOpen:!1},i.backEndHost=Object(p.i)(),i.frontEndHost=Object(p.k)(),i.witnessReportId=parseInt(i.props.location.search.substring(4)),i.disasterId="",i.observerId="",i.originalReportDate="",i.originalReportTime="",i.originalReportSeverity="",i.originalReportImageURL="",i.originalReportComment="",i.originalReportPeopleAffected="",i.originalReportLatitude="",i.originalReportLongitude="",i}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.backEndHost,"/api/witnessreports/").concat(this.witnessReportId)).then((function(e){return e.json()})).then((function(t){e.disasterId=t.disaster_id,e.observerId=t.observer_id,e.setState({reportDate:Object(p.m)(t.event_datetime),reportTime:Object(p.n)(t.event_datetime),reportSeverity:t.severity?t.severity.toString():"",reportImageURL:t.image_url?t.image_url:"",reportComment:t.comment?t.comment:"",reportPeopleAffected:t.people_affected.toString(),reportLatitude:t.location[0].toString(),reportLongitude:t.location[1].toString()}),e.originalReportDate=Object(p.m)(t.event_datetime),e.originalReportTime=Object(p.n)(t.event_datetime),e.originalReportSeverity=t.severity?t.severity.toString():"",e.originalReportImageURL=t.image_url?t.image_url:"",e.originalReportComment=t.comment?t.comment:"",e.originalReportPeopleAffected=t.people_affected.toString(),e.originalReportLatitude=t.location[0].toString(),e.originalReportLongitude=t.location[1].toString()})).catch((function(t){console.log("Error fetching disaster with id ",e.disasterId),console.log(t)}))}},{key:"onReportDateChange",value:function(e){this.setState({reportDate:e.target.value})}},{key:"onReportTimeChange",value:function(e){this.setState({reportTime:e.target.value})}},{key:"onReportPeopleAffectedChange",value:function(e){this.setState({reportPeopleAffected:e.target.value})}},{key:"onReportLatitudeChange",value:function(e){this.setState({reportLatitude:e.target.value})}},{key:"onReportLongitudeChange",value:function(e){this.setState({reportLongitude:e.target.value})}},{key:"onReportSeverityChange",value:function(e){this.setState({reportSeverity:e.target.value})}},{key:"onReportImageURLChange",value:function(e){this.setState({reportImageURL:e.target.value})}},{key:"onReportCommentChange",value:function(e){this.setState({reportComment:e.target.value})}},{key:"onSubmit",value:function(){var e=this,t=!0,r=!0,i=!0,n=!0,o=!0,a=!0,s=!0,c=this.state,d=c.reportDate,l=c.reportTime,u=c.reportSeverity,h=c.reportImageURL,m=c.reportComment,b=c.reportPeopleAffected,f=c.reportLatitude,g=c.reportLongitude;if(""==d&&(t=!1),Object(p.u)(l)||(r=!1),""==u||Object(p.t)(u,0,10)||(i=!1),""==h||Object(p.r)(h)||(n=!1),Object(p.s)(b)||(o=!1),Object(p.q)(f)||(a=!1),Object(p.q)(g)||(s=!1),t&&r&&i&&n&&o&&a&&s){var j={id:this.witnessReportId};d==this.originalReportDate&&l.trim()==this.originalReportTime.trim()||(j.event_datetime=new Date(d+"T"+Object(p.l)(l))),u.trim()!=this.originalReportSeverity.trim()&&(j.severity=parseInt(u.trim())),h.trim()!=this.originalReportImageURL.trim()&&(j.image_url=h.trim()),m.trim()!=this.originalReportComment.trim()&&(j.comment=m.trim()),b.trim()!=this.originalReportPeopleAffected.trim()&&(j.people_affected=parseInt(b.trim())),f.trim()!=this.originalReportLatitude.trim()&&(j.location_latitude=parseFloat(f.trim())),g.trim()!=this.originalReportLongitude.trim()&&(j.location_longitude=parseFloat(g.trim())),fetch("".concat(this.backEndHost,"/api/witnessreports"),{method:"PATCH",body:JSON.stringify(j),contentType:"application/json",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(p.j)(p.d)}}).then((function(e){return e.json()})).then((function(t){401!=t.error||"authorization issue - 401 Unauthorized: The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required."!=t.message||t.success?(e.originalReportDate=Object(p.m)(t.event_datetime),e.originalReportTime=Object(p.n)(t.event_datetime),e.originalReportSeverity=t.severity?t.severity.toString():"",e.originalReportImageURL=t.image_url?t.image_url:"",e.originalReportComment=t.comment?t.comment:"",e.originalReportPeopleAffected=t.people_affected.toString(),e.originalReportLatitude=t.location[0].toString(),e.originalReportLongitude=t.location[1].toString()):e.setState({isModalOpen:!0})})).catch((function(t){console.log("Error fetching disaster with id ",e.disasterId),console.log(t)}))}this.setState({isValidReportDate:t,isValidReportTime:r,isValidReportSeverity:i,isValidReportImageURL:n,isValidReportPeopleAffected:o,isValidReportLatitude:a,isValidReportLongitude:s})}},{key:"resetDisasterForm",value:function(){this.setState({reportDate:this.originalReportDate,reportTime:this.originalReportTime,reportSeverity:this.originalReportSeverity,reportImageURL:this.originalReportImageURL,reportComment:this.originalReportComment,reportPeopleAffected:this.originalReportPeopleAffected,reportLatitude:this.originalReportLatitude,reportLongitude:this.originalReportLongitude,isValidReportDate:!0,isValidReportTime:!0,isValidReportSeverity:!0,isValidReportImageURL:!0,isValidReportPeopleAffected:!0,isValidReportLatitude:!0,isValidReportLongitude:!0})}},{key:"onModalClose",value:function(){this.setState({isModalOpen:!1})}},{key:"render",value:function(){var e=this.state,t=e.reportDate,r=e.isValidReportDate,n=e.reportTime,o=e.isValidReportTime,a=e.reportPeopleAffected,s=e.isValidReportPeopleAffected,c=e.reportLatitude,d=e.isValidReportLatitude,h=e.reportLongitude,m=e.isValidReportLongitude,b=e.reportSeverity,f=e.isValidReportSeverity,g=e.reportImageURL,j=e.isValidReportImageURL,v=e.reportComment,x=e.isModalOpen,O=Object(p.j)(p.d),R=!O||""==O;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l.xb,{children:Object(i.jsx)(l.v,{xs:"12",children:Object(i.jsxs)(l.k,{children:[Object(i.jsxs)(l.o,{children:[Object(i.jsx)("h4",{children:"Edit Witness Report"}),R&&Object(i.jsx)("div",{className:"top-information-text",children:Object(p.o)("edit witness reports")})]}),Object(i.jsx)(l.l,{children:Object(i.jsxs)(l.K,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",children:[Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"good-date-input",children:"Date Witnessed"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[r&&Object(i.jsx)(l.T,{type:"date",id:"good-date-input",name:"good-date-input",placeholder:"date",value:t,onChange:this.onReportDateChange.bind(this)}),!r&&Object(i.jsx)(l.T,{type:"date",id:"bad-date-input",invalid:!0,name:"bad-date-input",placeholder:"date",value:t,onChange:this.onReportDateChange.bind(this)}),Object(i.jsx)(l.bb,{children:"Date provided is blank"}),Object(i.jsx)(l.M,{children:"Date of the report"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"time-input",children:"Time Witnessed"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[o&&Object(i.jsx)(l.T,{id:"good-time-input",name:"good-time-input",placeholder:"Text",value:n,onChange:this.onReportTimeChange.bind(this)}),!o&&Object(i.jsx)(l.T,{id:"bad-time-input",invalid:!0,name:"bad-time-input",placeholder:"Text",value:n,onChange:this.onReportTimeChange.bind(this)}),Object(i.jsx)(l.bb,{children:"Time provided is blank or format is not recognized"}),Object(i.jsx)(l.M,{children:"Time of the report"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"people-affected-input",children:"Number Of People Affected"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[s&&Object(i.jsx)(l.T,{id:"people-affected-input",name:"people-affected-input",placeholder:"Text",value:a,onChange:this.onReportPeopleAffectedChange.bind(this)}),!s&&Object(i.jsx)(l.T,{id:"people-affected-input",invalid:!0,name:"people-affected-input",placeholder:"Text",value:a,onChange:this.onReportPeopleAffectedChange.bind(this)}),Object(i.jsx)(l.bb,{children:"Number of people affected is blank or format is not recognized"}),Object(i.jsx)(l.M,{children:"Estimate of number of people affected"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"latitude-text-input",children:"Location Latitude"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[d&&Object(i.jsx)(l.T,{id:"latitude-text-input",name:"latitude-text-input",placeholder:"0.00",onChange:this.onReportLatitudeChange.bind(this),value:c}),!d&&Object(i.jsx)(l.T,{invalid:!0,id:"latitude-text-input",name:"latitude-text-input",placeholder:"0.00",onChange:this.onReportLatitudeChange.bind(this),value:c}),Object(i.jsx)(l.bb,{children:"Location latitude is blank or format is not recognized"}),Object(i.jsx)(l.M,{children:"Signed latitude of disaster"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"longitude-text-input",children:"Location Longitude"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[m&&Object(i.jsx)(l.T,{id:"longitude-text-input",name:"longitude-text-input",placeholder:"0.00",onChange:this.onReportLongitudeChange.bind(this),value:h}),!m&&Object(i.jsx)(l.T,{invalid:!0,id:"longitude-text-input",name:"longitude-text-input",placeholder:"0.00",onChange:this.onReportLongitudeChange.bind(this),value:h}),Object(i.jsx)(l.bb,{children:"Location longitude is blank or format is not recognized"}),Object(i.jsx)(l.M,{children:"Signed longitude of disaster"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"severity-text-input",children:"Severity (optional)"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[f&&Object(i.jsx)(l.T,{id:"severity-text-input",name:"severity-text-input",placeholder:"0",onChange:this.onReportSeverityChange.bind(this),value:b}),!f&&Object(i.jsx)(l.T,{invalid:!0,id:"severity-text-input",name:"severity-text-input",placeholder:"0",onChange:this.onReportSeverityChange.bind(this),value:b}),Object(i.jsx)(l.bb,{children:"Format of severity is not recognized or out of range"}),Object(i.jsx)(l.M,{children:"Severity of disaster on a scale of 0 to 10, integral values only"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"image-url-text-input",children:"Image URL (optional)"})}),Object(i.jsxs)(l.v,{xs:"12",md:"9",children:[j&&Object(i.jsx)(l.T,{id:"image-url-text-input",name:"image-url-text-input",placeholder:"Text",onChange:this.onReportImageURLChange.bind(this),value:g}),!j&&Object(i.jsx)(l.T,{invalid:!0,id:"image-url-text-input",name:"image-url-text-input",placeholder:"Text",onChange:this.onReportImageURLChange.bind(this),value:g}),Object(i.jsx)(l.bb,{children:"Format of image URL is not recognized"}),Object(i.jsx)(l.M,{children:"Image of disaster (must be hosted on Internet already)"})]})]}),Object(i.jsxs)(l.L,{row:!0,children:[Object(i.jsx)(l.v,{md:"3",children:Object(i.jsx)(l.db,{htmlFor:"textarea-input",children:"Comment (optional)"})}),Object(i.jsx)(l.v,{xs:"12",md:"9",children:Object(i.jsx)(l.Mb,{name:"textarea-input",id:"textarea-input",rows:"9",placeholder:"Content...",onChange:this.onReportCommentChange.bind(this),value:v})})]})]})}),Object(i.jsxs)(l.m,{children:[Object(i.jsxs)(l.f,{type:"submit",size:"sm",color:"primary",onClick:this.onSubmit.bind(this),children:[Object(i.jsx)(u.a,{name:"cil-scrubber"})," Submit"]}),Object(i.jsxs)(l.f,{type:"reset",size:"sm",color:"danger",onClick:this.resetDisasterForm.bind(this),children:[Object(i.jsx)(u.a,{name:"cil-ban"})," Reset"]})]})]})})}),Object(i.jsxs)(l.hb,{show:x,onClose:this.onModalClose.bind(this),children:[Object(i.jsx)(l.kb,{closeButton:!0,children:Object(i.jsx)(l.lb,{children:"Failure To Edit Witness Report"})}),Object(i.jsx)(l.ib,{children:Object(p.p)("edit witness reports")}),Object(i.jsx)(l.jb,{children:Object(i.jsx)(l.f,{color:"secondary",onClick:this.onModalClose.bind(this),children:"OK"})})]})]})}}]),r}(d.a.Component);t.default=h}}]);
//# sourceMappingURL=6.402a9a9f.chunk.js.map