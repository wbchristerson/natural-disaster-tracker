(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[42],{690:function(e,t,s){"use strict";s.r(t);var i=s(20),a=s(162),n=s(163),l=s(165),o=s(164),c=s(1),r=s.n(c),d=s(621),h=s(623),j=s(628),u=function(e){Object(l.a)(s,e);var t=Object(o.a)(s);function s(e){var i;return Object(a.a)(this,s),(i=t.call(this,e)).state={informalName:"",officialName:"",disasterType:"",isOngoing:!1,latitude:"",longitude:"",isModalOpen:!1,authorizationFailure:null,showToast:!1},i.backEndHost=Object(j.l)(),i.frontEndHost=Object(j.n)(),i}return Object(n.a)(s,[{key:"onInformalNameChange",value:function(e){this.setState({informalName:e.target.value})}},{key:"onOfficialNameChange",value:function(e){this.setState({officialName:e.target.value})}},{key:"onDisasterTypeChange",value:function(e){this.setState({disasterType:e.target.value})}},{key:"onIsOngoingChange",value:function(e){this.setState({isOngoing:!this.state.isOngoing})}},{key:"onLatitudeChange",value:function(e){/^-?\d*\.?\d*$/.test(e.target.value)&&parseFloat(e.target.value)>=-180&&parseFloat(e.target.value)<=180?this.setState({latitude:e.target.value}):""==e.target.value?this.setState({latitude:""}):"-"==e.target.value&&this.setState({latitude:"-"})}},{key:"onLongitudeChange",value:function(e){/^-?\d*\.?\d*$/.test(e.target.value)&&parseFloat(e.target.value)>=-180&&parseFloat(e.target.value)<=180?this.setState({longitude:e.target.value}):""==e.target.value?this.setState({longitude:""}):"-"==e.target.value&&this.setState({longitude:"-"})}},{key:"onSubmit",value:function(){var e=this;this.setState({showToast:!1}),fetch("".concat(this.backEndHost,"/api/disasters"),{method:"POST",body:JSON.stringify({informal_name:this.state.informalName,official_name:this.state.officialName,disaster_type:this.state.disasterType,is_ongoing:this.state.isOngoing,location_latitude:this.state.latitude,location_longitude:this.state.longitude}),contentType:"application/json",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(j.m)(j.e)}}).then((function(t){401==t.status&&"UNAUTHORIZED"==t.statusText||403==t.status&&"FORBIDDEN"==t.statusText?e.setState({isModalOpen:!0,authorizationFailure:t.status}):200==t.status&&e.setState({showToast:!0})})).catch((function(e){return console.log("error!!!: ",e)}))}},{key:"resetDisasterForm",value:function(){this.setState({informalName:"",officialName:"",disasterType:"",isOngoing:!1,latitude:"",longitude:""})}},{key:"onModalClose",value:function(){this.setState({isModalOpen:!1,authorizationFailure:null})}},{key:"render",value:function(){var e=this,t=this.state,s=t.isModalOpen,a=t.authorizationFailure,n=t.showToast,l=t.informalName;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(d.xb,{children:Object(i.jsx)(d.v,{xs:"12",children:Object(i.jsxs)(d.k,{children:[Object(i.jsxs)(d.o,{children:[Object(i.jsx)("h4",{children:"Add Disaster Listing"}),Object(i.jsx)("div",{className:"top-information-text",children:Object(j.k)("add disaster listings")})]}),Object(i.jsx)(d.l,{children:Object(i.jsxs)(d.K,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",children:[Object(i.jsxs)(d.L,{row:!0,children:[Object(i.jsx)(d.v,{md:"3",children:Object(i.jsx)(d.db,{htmlFor:"text-input",children:"Informal Name"})}),Object(i.jsxs)(d.v,{xs:"12",md:"9",children:[Object(i.jsx)(d.T,{id:"text-input",name:"text-input",placeholder:"Text",value:this.state.informalName,onChange:this.onInformalNameChange.bind(this)}),Object(i.jsx)(d.M,{children:"The colloquial name of the disaster"})]})]}),Object(i.jsxs)(d.L,{row:!0,children:[Object(i.jsx)(d.v,{md:"3",children:Object(i.jsx)(d.db,{htmlFor:"text-input",children:"Official Name"})}),Object(i.jsxs)(d.v,{xs:"12",md:"9",children:[Object(i.jsx)(d.T,{id:"text-input",name:"text-input",placeholder:"Text",value:this.state.officialName,onChange:this.onOfficialNameChange.bind(this)}),Object(i.jsx)(d.M,{children:"The identifying name of the disaster"})]})]}),Object(i.jsxs)(d.L,{row:!0,children:[Object(i.jsx)(d.v,{md:"3",children:Object(i.jsx)(d.db,{htmlFor:"select",children:"Disaster Type"})}),Object(i.jsx)(d.v,{xs:"12",md:"9",children:Object(i.jsx)(d.yb,{custom:!0,name:"select",id:"select",value:this.state.disasterType,onChange:this.onDisasterTypeChange.bind(this),children:j.b.map((function(e){return Object(i.jsx)("option",{value:e,children:e},e)}))})})]}),Object(i.jsxs)(d.L,{row:!0,children:[Object(i.jsx)(d.v,{tag:"label",sm:"3",className:"col-form-label",children:"Disaster Ongoing"}),Object(i.jsx)(d.v,{sm:"1",children:Object(i.jsx)(d.Ib,{id:"add-disaster-ongoing-switch",className:"mr-1",color:"danger",shape:"pill",checked:this.state.isOngoing,onChange:this.onIsOngoingChange.bind(this)})}),Object(i.jsx)(d.v,{sm:"3",children:Object(i.jsx)(d.db,{htmlFor:"add-disaster-ongoing-switch",children:this.state.isOngoing?"Yes":"No"})})]}),Object(i.jsxs)(d.L,{row:!0,children:[Object(i.jsx)(d.v,{md:"3",children:Object(i.jsx)(d.db,{htmlFor:"email-input",children:"Latitude"})}),Object(i.jsxs)(d.v,{xs:"12",md:"9",children:[Object(i.jsx)(d.T,{type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.latitude,onChange:this.onLatitudeChange.bind(this)}),Object(i.jsx)(d.M,{className:"help-block",children:"The latitude of the disaster"})]})]}),Object(i.jsxs)(d.L,{row:!0,children:[Object(i.jsx)(d.v,{md:"3",children:Object(i.jsx)(d.db,{htmlFor:"email-input",children:"Longitude"})}),Object(i.jsxs)(d.v,{xs:"12",md:"9",children:[Object(i.jsx)(d.T,{type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.longitude,onChange:this.onLongitudeChange.bind(this)}),Object(i.jsx)(d.M,{className:"help-block",children:"The longitude of the disaster"})]})]})]})}),Object(i.jsxs)(d.m,{children:[Object(i.jsxs)(d.f,{type:"submit",size:"sm",color:"primary",onClick:this.onSubmit.bind(this),children:[Object(i.jsx)(h.a,{name:"cil-scrubber"})," Submit"]}),Object(i.jsxs)(d.f,{type:"reset",size:"sm",color:"danger",onClick:this.resetDisasterForm.bind(this),children:[Object(i.jsx)(h.a,{name:"cil-ban"})," Reset"]})]})]})})}),Object(i.jsxs)(d.hb,{show:s,onClose:this.onModalClose.bind(this),children:[Object(i.jsx)(d.kb,{closeButton:!0,children:Object(i.jsx)(d.lb,{children:"Failure To Create Disaster Listing"})}),Object(i.jsx)(d.ib,{children:Object(j.j)("add disaster listings",a)}),Object(i.jsx)(d.jb,{children:Object(i.jsx)(d.f,{color:"secondary",onClick:function(){return e.onModalClose()},children:"OK"})})]}),Object(i.jsx)(d.Qb,{position:"top-center",children:Object(i.jsxs)(d.Nb,{show:n,autohide:5e3,fade:!0,children:[Object(i.jsx)(d.Pb,{closeButton:!0,children:"Disaster Listing Added"}),Object(i.jsx)(d.Ob,{children:"The disaster listing for ".concat(l," has been added successfully!")})]},"toast")},"toaster-top-center")]})}}]),s}(r.a.Component);t.default=u}}]);
//# sourceMappingURL=42.6b283836.chunk.js.map