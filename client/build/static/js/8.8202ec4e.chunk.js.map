{"version":3,"sources":["views/added-pages/EditWitnessReport.js"],"names":["EditWitnessReport","props","state","reportDate","reportTime","reportSeverity","reportImageURL","reportComment","reportPeopleAffected","reportLatitude","reportLongitude","isValidReportDate","isValidReportTime","isValidReportSeverity","isValidReportImageURL","isValidReportPeopleAffected","isValidReportLatitude","isValidReportLongitude","isModalOpen","showToast","backEndHost","getBackEndHost","frontEndHost","getFrontEndHost","witnessReportId","parseInt","location","search","substring","disasterId","observerId","originalReportDate","originalReportTime","originalReportSeverity","originalReportImageURL","originalReportComment","originalReportPeopleAffected","originalReportLatitude","originalReportLongitude","fetch","this","then","response","json","result","disaster_id","observer_id","setState","getLocalDateFromGMTDateTime","event_datetime","getLocalTimeFromGMTDateTime","severity","toString","image_url","comment","people_affected","catch","e","console","log","evt","target","value","isValidTime","isValidNonnegativeIntegerInRange","isValidImageURL","isValidNonnegativeInteger","isValidGeographicCoordinate","rawBody","id","trim","Date","getGeneralTimeFormat","location_latitude","parseFloat","location_longitude","method","body","JSON","stringify","contentType","headers","getCookieWithKey","USER_ACCESS_TOKEN_KEY","error","message","success","userAccessToken","isLoggedOut","xs","className","getSignInRequirementWarningMessage","action","encType","row","md","htmlFor","type","name","placeholder","onChange","onReportDateChange","bind","invalid","onReportTimeChange","onReportPeopleAffectedChange","onReportLatitudeChange","onReportLongitudeChange","onReportSeverityChange","onReportImageURLChange","rows","onReportCommentChange","size","color","onClick","onSubmit","resetDisasterForm","show","onClose","onModalClose","closeButton","getSignInRequirementsErrorMessage","position","autohide","fade","React","Component"],"mappings":"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","file":"static/js/8.8202ec4e.chunk.js","sourcesContent":["import React from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardFooter,\n  CCardHeader,\n  CCol,\n  CForm,\n  CFormGroup,\n  CFormText,\n  CInvalidFeedback,\n  CTextarea,\n  CInput,\n  CLabel,\n  CRow,\n  CModal,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CToaster,\n  CToast,\n  CToastHeader,\n  CToastBody\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport { getCookieWithKey, USER_ACCESS_TOKEN_KEY, getBackEndHost, getFrontEndHost, isValidGeographicCoordinate, getLocalTimeFromGMTDateTime,\n  getLocalDateFromGMTDateTime, isValidTime, isValidNonnegativeIntegerInRange, isValidNonnegativeInteger, isValidImageURL, getGeneralTimeFormat,\n  getSignInRequirementWarningMessage, getSignInRequirementsErrorMessage } from 'src/Utilities';\n\n\nclass EditWitnessReport extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reportDate: \"\",\n      reportTime: \"\",\n      reportSeverity: \"\",\n      reportImageURL: \"\",\n      reportComment: \"\",\n      reportPeopleAffected: \"\",\n      reportLatitude: \"\",\n      reportLongitude: \"\",\n\n      isValidReportDate: true,\n      isValidReportTime: true,\n      isValidReportSeverity: true,\n      isValidReportImageURL: true,\n      isValidReportPeopleAffected: true,\n      isValidReportLatitude: true,\n      isValidReportLongitude: true,\n\n      isModalOpen: false,\n      showToast: false,\n    };\n    this.backEndHost = getBackEndHost();\n    this.frontEndHost = getFrontEndHost();\n    this.witnessReportId = parseInt(this.props.location.search.substring(4));\n    this.disasterId = \"\";\n    this.observerId = \"\";\n    \n    this.originalReportDate = \"\";\n    this.originalReportTime = \"\";\n    this.originalReportSeverity = \"\";\n    this.originalReportImageURL = \"\";\n    this.originalReportComment = \"\";\n    this.originalReportPeopleAffected = \"\";\n    this.originalReportLatitude = \"\";\n    this.originalReportLongitude = \"\";\n  }\n\n  componentDidMount() {\n    fetch(`${this.backEndHost}/api/witnessreports/${this.witnessReportId}`)\n    .then(response => response.json())\n    .then(result => {\n        this.disasterId = result.disaster_id;\n        this.observerId = result.observer_id;\n        this.setState({\n          reportDate: getLocalDateFromGMTDateTime(result.event_datetime),\n          reportTime: getLocalTimeFromGMTDateTime(result.event_datetime),\n          reportSeverity: result.severity ? result.severity.toString() : \"\",\n          reportImageURL: result.image_url ? result.image_url : \"\",\n          reportComment: result.comment ? result.comment : \"\",\n          reportPeopleAffected: result.people_affected.toString(),\n          reportLatitude: result.location[0].toString(),\n          reportLongitude: result.location[1].toString(),\n        });\n\n        this.originalReportDate = getLocalDateFromGMTDateTime(result.event_datetime);\n        this.originalReportTime = getLocalTimeFromGMTDateTime(result.event_datetime);\n        this.originalReportSeverity = result.severity ? result.severity.toString() : \"\";\n        this.originalReportImageURL = result.image_url ? result.image_url : \"\";\n        this.originalReportComment = result.comment ? result.comment : \"\";\n        this.originalReportPeopleAffected = result.people_affected.toString();\n        this.originalReportLatitude = result.location[0].toString();\n        this.originalReportLongitude = result.location[1].toString();\n    })\n    .catch(e => {\n        console.log(\"Error fetching disaster with id \", this.disasterId);\n        console.log(e);\n    });\n  }\n\n  onReportDateChange(evt) {\n    this.setState({\n      reportDate: evt.target.value,\n    });\n  }\n\n  onReportTimeChange(evt) {\n    this.setState({\n      reportTime: evt.target.value,\n    });\n  }\n\n  onReportPeopleAffectedChange(evt) {\n    this.setState({\n      reportPeopleAffected: evt.target.value,\n    });\n  }\n\n  onReportLatitudeChange(evt) {\n    this.setState({\n      reportLatitude: evt.target.value,\n    });\n  }\n\n  onReportLongitudeChange(evt) {\n    this.setState({\n      reportLongitude: evt.target.value,\n    });\n  }\n\n  onReportSeverityChange(evt) {\n    this.setState({\n      reportSeverity: evt.target.value,\n    });\n  }\n\n  onReportImageURLChange(evt) {\n    this.setState({\n      reportImageURL: evt.target.value,\n    });\n  }\n\n  onReportCommentChange(evt) {\n    this.setState({\n      reportComment: evt.target.value,\n    });\n  }\n\n  onSubmit() {\n    let\n      isValidReportDate = true,\n      isValidReportTime = true,\n      isValidReportSeverity = true,\n      isValidReportImageURL = true,\n      isValidReportPeopleAffected = true,\n      isValidReportLatitude = true,\n      isValidReportLongitude = true;\n\n\n    const {reportDate, reportTime, reportSeverity, reportImageURL, reportComment, reportPeopleAffected,\n      reportLatitude, reportLongitude} = this.state;\n    \n    if (reportDate == \"\") {\n      isValidReportDate = false;\n    }\n\n    if (!isValidTime(reportTime)) {\n      isValidReportTime = false;\n    }\n\n    if (reportSeverity != \"\" && !isValidNonnegativeIntegerInRange(reportSeverity, 0, 10)) {\n      isValidReportSeverity = false;\n    }\n\n    if (reportImageURL != \"\" && !isValidImageURL(reportImageURL)) {\n      isValidReportImageURL = false;\n    }\n\n    if (!isValidNonnegativeInteger(reportPeopleAffected)) {\n      isValidReportPeopleAffected = false;\n    }\n\n    if (!isValidGeographicCoordinate(reportLatitude)) {\n      isValidReportLatitude = false;\n    }\n\n    if (!isValidGeographicCoordinate(reportLongitude)) {\n      isValidReportLongitude = false;\n    }\n\n    if (isValidReportDate && isValidReportTime && isValidReportSeverity && isValidReportImageURL && \n      isValidReportPeopleAffected && isValidReportLatitude && isValidReportLongitude) {\n\n      const rawBody = { id: this.witnessReportId };\n      if (reportDate != this.originalReportDate || reportTime.trim() != this.originalReportTime.trim()) {\n        rawBody.event_datetime = new Date(reportDate + \"T\" + getGeneralTimeFormat(reportTime));\n      }\n      if (reportSeverity.trim() != this.originalReportSeverity.trim()) {\n        rawBody.severity = parseInt(reportSeverity.trim());\n      }\n      if (reportImageURL.trim() != this.originalReportImageURL.trim()) {\n        rawBody.image_url = reportImageURL.trim();\n      }\n      if (reportComment.trim() != this.originalReportComment.trim()) {\n        rawBody.comment = reportComment.trim();\n      }\n      if (reportPeopleAffected.trim() != this.originalReportPeopleAffected.trim()) {\n        rawBody.people_affected = parseInt(reportPeopleAffected.trim());\n      }\n      if (reportLatitude.trim() != this.originalReportLatitude.trim()) {\n        rawBody.location_latitude = parseFloat(reportLatitude.trim());\n      }\n      if (reportLongitude.trim() != this.originalReportLongitude.trim()) {\n        rawBody.location_longitude = parseFloat(reportLongitude.trim());\n      }\n\n      this.setState({\n        showToast: false,\n      });\n\n      fetch(`${this.backEndHost}/api/witnessreports`,\n        {\n          method: 'PATCH',\n          body: JSON.stringify(rawBody),\n          contentType: 'application/json',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + getCookieWithKey(USER_ACCESS_TOKEN_KEY),\n          }\n        }\n      )\n      .then(response => response.json())\n      .then(result => {\n        if (result.error == 401 && result.message == \"authorization issue - 401 Unauthorized: \" + \n          \"The server could not verify that you are authorized to access the URL requested. You \" + \n          \"either supplied the wrong credentials (e.g. a bad password), or your browser doesn't \" + \n          \"understand how to supply the credentials required.\" && !result.success) {\n          \n          this.setState({\n            isModalOpen: true,\n          });\n        } else {\n          this.originalReportDate = getLocalDateFromGMTDateTime(result.event_datetime);\n          this.originalReportTime = getLocalTimeFromGMTDateTime(result.event_datetime);\n          this.originalReportSeverity = result.severity ? result.severity.toString() : \"\";\n          this.originalReportImageURL = result.image_url ? result.image_url : \"\";\n          this.originalReportComment = result.comment ? result.comment : \"\";\n          this.originalReportPeopleAffected = result.people_affected.toString();\n          this.originalReportLatitude = result.location[0].toString();\n          this.originalReportLongitude = result.location[1].toString();\n          if (!result.error) {\n            this.setState({\n              showToast: true,\n            });  \n          }\n        }\n      })\n      .catch(e => {\n          console.log(\"Error fetching disaster with id \", this.disasterId);\n          console.log(e);\n      });\n    }\n\n    this.setState({\n      isValidReportDate,\n      isValidReportTime,\n      isValidReportSeverity,\n      isValidReportImageURL,\n      isValidReportPeopleAffected,\n      isValidReportLatitude,\n      isValidReportLongitude,\n    });\n  }\n\n  resetDisasterForm() {\n    this.setState({\n      reportDate: this.originalReportDate,\n      reportTime: this.originalReportTime,\n      reportSeverity: this.originalReportSeverity,\n      reportImageURL: this.originalReportImageURL,\n      reportComment: this.originalReportComment,\n      reportPeopleAffected: this.originalReportPeopleAffected,\n      reportLatitude: this.originalReportLatitude,\n      reportLongitude: this.originalReportLongitude,\n\n      isValidReportDate: true,\n      isValidReportTime: true,\n      isValidReportSeverity: true,\n      isValidReportImageURL: true,\n      isValidReportPeopleAffected: true,\n      isValidReportLatitude: true,\n      isValidReportLongitude: true,\n    });\n  }\n\n  onModalClose() {\n    this.setState({\n      isModalOpen: false,\n    });\n  }\n\n  render() {\n    const {reportDate, isValidReportDate, reportTime, isValidReportTime, reportPeopleAffected, isValidReportPeopleAffected,\n      reportLatitude, isValidReportLatitude, reportLongitude, isValidReportLongitude, reportSeverity, isValidReportSeverity,\n      reportImageURL, isValidReportImageURL, reportComment, isModalOpen, showToast} = this.state;\n    const userAccessToken = getCookieWithKey(USER_ACCESS_TOKEN_KEY);\n    const isLoggedOut = !userAccessToken || userAccessToken == \"\";\n\n    return (\n      <>\n        <CRow>\n          <CCol xs=\"12\">\n            <CCard>\n              <CCardHeader>\n                <h4>Edit Witness Report</h4>\n                {isLoggedOut && <div className=\"top-information-text\">{getSignInRequirementWarningMessage(\"edit witness reports\")}</div>}\n              </CCardHeader>\n              <CCardBody>\n                <CForm action=\"\" method=\"post\" encType=\"multipart/form-data\" className=\"form-horizontal\">\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"good-date-input\">Date Witnessed</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportDate && <CInput type=\"date\" id=\"good-date-input\" name=\"good-date-input\" placeholder=\"date\" value={reportDate} onChange={this.onReportDateChange.bind(this)}/>}\n                      {!isValidReportDate && <CInput type=\"date\" id=\"bad-date-input\" invalid name=\"bad-date-input\" placeholder=\"date\" value={reportDate} onChange={this.onReportDateChange.bind(this)}/>}\n                      <CInvalidFeedback>Date provided is blank</CInvalidFeedback>\n                      <CFormText>Date of the report</CFormText>\n                    </CCol>\n                  </CFormGroup>\n                  \n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"time-input\">Time Witnessed</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportTime && <CInput id=\"good-time-input\" name=\"good-time-input\" placeholder=\"Text\" value={reportTime} onChange={this.onReportTimeChange.bind(this)}/>}\n                      {!isValidReportTime && <CInput id=\"bad-time-input\" invalid name=\"bad-time-input\" placeholder=\"Text\" value={reportTime} onChange={this.onReportTimeChange.bind(this)}/>}\n                      <CInvalidFeedback>Time provided is blank or format is not recognized</CInvalidFeedback>\n                      <CFormText>Time of the report</CFormText>\n                    </CCol>\n                  </CFormGroup>\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"people-affected-input\">Number Of People Affected</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportPeopleAffected && <CInput id=\"people-affected-input\" name=\"people-affected-input\" placeholder=\"Text\" value={reportPeopleAffected} onChange={this.onReportPeopleAffectedChange.bind(this)}/>}\n                      {!isValidReportPeopleAffected && <CInput id=\"people-affected-input\" invalid name=\"people-affected-input\" placeholder=\"Text\" value={reportPeopleAffected} onChange={this.onReportPeopleAffectedChange.bind(this)}/>}\n                      <CInvalidFeedback>Number of people affected is blank or format is not recognized</CInvalidFeedback>\n                      <CFormText>Estimate of number of people affected</CFormText>\n                    </CCol>\n                  </CFormGroup>\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"latitude-text-input\">Location Latitude</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportLatitude && <CInput id=\"latitude-text-input\" name=\"latitude-text-input\" placeholder=\"0.00\" onChange={this.onReportLatitudeChange.bind(this)} value={reportLatitude} />}\n                      {!isValidReportLatitude && <CInput invalid id=\"latitude-text-input\" name=\"latitude-text-input\" placeholder=\"0.00\" onChange={this.onReportLatitudeChange.bind(this)} value={reportLatitude} />}\n                      <CInvalidFeedback>Location latitude is blank or format is not recognized</CInvalidFeedback>\n                      <CFormText>Signed latitude of disaster</CFormText>\n                    </CCol>\n                  </CFormGroup>\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"longitude-text-input\">Location Longitude</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportLongitude && <CInput id=\"longitude-text-input\" name=\"longitude-text-input\" placeholder=\"0.00\" onChange={this.onReportLongitudeChange.bind(this)} value={reportLongitude}/>}\n                      {!isValidReportLongitude && <CInput invalid id=\"longitude-text-input\" name=\"longitude-text-input\" placeholder=\"0.00\" onChange={this.onReportLongitudeChange.bind(this)} value={reportLongitude}/>}\n                      <CInvalidFeedback>Location longitude is blank or format is not recognized</CInvalidFeedback>\n                      <CFormText>Signed longitude of disaster</CFormText>\n                    </CCol>\n                  </CFormGroup>\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"severity-text-input\">Severity (optional)</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportSeverity && <CInput id=\"severity-text-input\" name=\"severity-text-input\" placeholder=\"0\" onChange={this.onReportSeverityChange.bind(this)} value={reportSeverity}/>}\n                      {!isValidReportSeverity && <CInput invalid id=\"severity-text-input\" name=\"severity-text-input\" placeholder=\"0\" onChange={this.onReportSeverityChange.bind(this)} value={reportSeverity}/>}\n                      <CInvalidFeedback>Format of severity is not recognized or out of range</CInvalidFeedback>\n                      <CFormText>Severity of disaster on a scale of 0 to 10, integral values only</CFormText>\n                    </CCol>\n                  </CFormGroup>\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"image-url-text-input\">Image URL (optional)</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      {isValidReportImageURL && <CInput id=\"image-url-text-input\" name=\"image-url-text-input\" placeholder=\"Text\" onChange={this.onReportImageURLChange.bind(this)} value={reportImageURL}/>}\n                      {!isValidReportImageURL && <CInput invalid id=\"image-url-text-input\" name=\"image-url-text-input\" placeholder=\"Text\" onChange={this.onReportImageURLChange.bind(this)} value={reportImageURL}/>}\n                      <CInvalidFeedback>Format of image URL is not recognized</CInvalidFeedback>\n                      <CFormText>Image of disaster (must be hosted on Internet already)</CFormText>\n                    </CCol>\n                  </CFormGroup>\n\n                  <CFormGroup row>\n                    <CCol md=\"3\">\n                      <CLabel htmlFor=\"textarea-input\">Comment (optional)</CLabel>\n                    </CCol>\n                    <CCol xs=\"12\" md=\"9\">\n                      <CTextarea \n                        name=\"textarea-input\" \n                        id=\"textarea-input\" \n                        rows=\"9\"\n                        placeholder=\"Content...\"\n                        onChange={this.onReportCommentChange.bind(this)}\n                        value={reportComment}\n                      />\n                    </CCol>\n                  </CFormGroup>\n                </CForm>\n              </CCardBody>\n              <CCardFooter>\n                <CButton type=\"submit\" size=\"sm\" color=\"primary\" onClick={this.onSubmit.bind(this)}><CIcon name=\"cil-scrubber\" /> Submit</CButton>\n                <CButton type=\"reset\" size=\"sm\" color=\"danger\" onClick={this.resetDisasterForm.bind(this)}><CIcon name=\"cil-ban\" /> Reset</CButton>\n              </CCardFooter>\n            </CCard>\n          </CCol>\n        </CRow>\n\n        <CModal show={isModalOpen} onClose={this.onModalClose.bind(this)}>\n          <CModalHeader closeButton>\n            <CModalTitle>Failure To Edit Witness Report</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            {getSignInRequirementsErrorMessage(\"edit witness reports\")}\n          </CModalBody>\n          <CModalFooter>\n            <CButton \n              color=\"secondary\" \n              onClick={this.onModalClose.bind(this)}\n            >OK</CButton>\n          </CModalFooter>\n        </CModal>\n\n        <CToaster\n          position={'top-center'}\n          key={'toaster-top-center'}\n        >\n          <CToast\n            key={'toast'}\n            show={showToast}\n            autohide={5000}\n            fade={true}\n          >\n            <CToastHeader closeButton={true}>\n              Witness Report Updated\n            </CToastHeader>\n            <CToastBody>\n              {`The witness report has been updated successfully!`}\n            </CToastBody>\n          </CToast>\n        </CToaster>\n      </>\n    );\n  }\n}\n\nexport default EditWitnessReport;"],"sourceRoot":""}