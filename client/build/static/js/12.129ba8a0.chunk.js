(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{622:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(624);function a(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n.a)(e,t):void 0}}},623:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(622);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},624:function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return n}))},627:function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"j",(function(){return d})),i.d(t,"k",(function(){return u})),i.d(t,"i",(function(){return h})),i.d(t,"e",(function(){return f})),i.d(t,"f",(function(){return m})),i.d(t,"u",(function(){return g})),i.d(t,"s",(function(){return b})),i.d(t,"q",(function(){return j})),i.d(t,"t",(function(){return p})),i.d(t,"r",(function(){return O})),i.d(t,"l",(function(){return y})),i.d(t,"n",(function(){return N})),i.d(t,"m",(function(){return T})),i.d(t,"g",(function(){return C})),i.d(t,"h",(function(){return I})),i.d(t,"o",(function(){return L})),i.d(t,"p",(function(){return k}));var n=i(623),a=i(622);var r="user_access_token",o="No data available from witness reports",s="observer_database_id",l=["Please select","Earthquake","Flood","Wildfire","Tornado","Hurricane","Tsunami","Landslide","Avalanche","Volcano","Other"],c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function d(e){var t,i=function(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=Object(a.a)(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}(document.cookie.split(";"));try{for(i.s();!(t=i.n()).done;){var n=t.value.split("=");if((n[0]+"").trim()===e)return n[1]}}catch(r){i.e(r)}finally{i.f()}return""}function u(){return"https://sample-will.herokuapp.com"}function h(){return"https://sample-will.herokuapp.com"}function f(e){return e||o}function m(e){var t=Object(n.a)(e,2),i=t[0],a=t[1];return Math.abs(i)+"\xb0 "+(i>=0?"N":"S")+", "+(Math.abs(a)+"\xb0 "+(a>=0?"E":"W"))}function g(e){if(!/^\s*\d?\d:\d\d(:\d\d)?\s*$/.test(e))return!1;e.trim();var t=parseInt(":"==e.charAt(1)?e.slice(0,1):e.slice(0,2)),i=parseInt(":"==e.charAt(1)?e.slice(2,4):e.slice(3,5)),n=e.length>5?parseInt(":"==e.charAt(1)?e.slice(5,7):e.slice(6,8)):null;return 0<=t&&t<24&&0<=i&&i<60&&0<=n&&n<60}function b(e){return/^\s*\d+\s*$/.test(e)}function j(e){if(!/^\s*-?0*\d\d?\d?(\.\d*)?\s*$/.test(e))return!1;var t=parseInt(e);return-180<=t&&t<=180}function p(e,t,i){if(!/^\s*\d+\s*$/.test(e))return!1;var n=parseInt(e);return t<=n&&n<=i}function O(e){return/^\s*.*(\.jpg|\.jpeg|\.png)\s*$/.test(e)}function y(e){var t=e.trim();return 4==t.length?"0"+t+":00":5==t.length?t+":00":t}function v(e){var t=e.split(" "),i=Object(n.a)(t,6),a=(i[0],i[1]),r=i[2],o=i[3],s=i[4],l=(i[5],s.split(":")),d=Object(n.a)(l,3),u=d[0],h=d[1],f=d[2],m=(c.indexOf(r)+1).toString()+"/"+a+"/"+o;return new Date(m+" "+(u+":"+h+":"+f+" UTC"))}function x(e,t){for(var i=e.toString(),n=i,a=0;a<t-i.length;a++)n="0"+n;return n}function N(e){var t=v(e);return x(t.getHours(),2)+":"+x(t.getMinutes(),2)+":"+x(t.getSeconds(),2)}function T(e){var t=v(e),i=x(t.getMonth()+1,2),n=x(t.getDate(),2);return x(t.getFullYear(),2)+"-"+i+"-"+n}function C(e,t){return"A failure occurred. The ability to ".concat(e," requires admin \n    privileges and it looks like those have not been granted to you. If you \n    would like admin privileges, please ").concat(401==t?"create an account by signing up (for free!) and":""," email me at \n    wbchristerson@gmail.com with your username.")}function I(e){var t=d(r);return"Please note that the ability to ".concat(e," requires admin privileges. If you do \n    not have admin privileges and would like them, please ").concat(t?"":"create an account by signing up (for free!) and"," email me at wbchristerson@gmail.com with\n    your username.")}function L(e){return"Note that you must be logged-in to ".concat(e,". If you do not \n    have an account, you can create one for free by signing up.")}function k(e){return"A failure occurred. You must be logged-in to ".concat(e,". You can\n     create an account (for free!) by signing up.")}},689:function(e,t,i){"use strict";i.r(t);var n=i(20),a=i(162),r=i(163),o=i(165),s=i(164),l=i(1),c=i.n(l),d=i(620),u=i(625),h=i(627),f=function(e){Object(o.a)(i,e);var t=Object(s.a)(i);function i(e){var n;return Object(a.a)(this,i),(n=t.call(this,e)).state={informalName:"",officialName:"",disasterType:"",isOngoing:!1,latitude:"",longitude:"",isValidInformalName:!0,isValidOfficialName:!0,isValidDisasterType:!0,isValidLatitude:!0,isValidLongitude:!0,isModalOpen:!1,authorizationFailure:null},n.backEndHost=Object(h.i)(),n.frontEndHost=Object(h.k)(),n.disasterId=parseInt(n.props.location.search.substring(4)),n.originalInformalName="",n.originalOfficialName="",n.originalDisasterType="",n.originalIsOngoing=!1,n.originalLatitude="",n.originalLongitude="",n}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.backEndHost,"/api/disasters/").concat(this.disasterId)).then((function(e){return e.json()})).then((function(t){e.setState({informalName:t.informal_name,officialName:t.official_name,disasterType:t.disaster_type.charAt(0).toUpperCase()+t.disaster_type.slice(1),isOngoing:t.is_ongoing,latitude:t.location[0].toString(),longitude:t.location[1].toString()}),e.originalInformalName=t.informal_name,e.originalOfficialName=t.official_name,e.originalDisasterType=t.disaster_type.charAt(0).toUpperCase()+t.disaster_type.slice(1),e.originalIsOngoing=t.is_ongoing,e.originalLatitude=t.location[0].toString(),e.originalLongitude=t.location[1].toString()})).catch((function(t){console.log("Error fetching disaster with id ",e.disasterId),console.log(t)}))}},{key:"onInformalNameChange",value:function(e){this.setState({informalName:e.target.value})}},{key:"onOfficialNameChange",value:function(e){this.setState({officialName:e.target.value})}},{key:"onDisasterTypeChange",value:function(e){this.setState({disasterType:e.target.value})}},{key:"onIsOngoingChange",value:function(e){this.setState({isOngoing:!this.state.isOngoing})}},{key:"onLatitudeChange",value:function(e){this.setState({latitude:e.target.value})}},{key:"onLongitudeChange",value:function(e){this.setState({longitude:e.target.value})}},{key:"onSubmit",value:function(){var e=this,t=!0,i=!0,n=!0,a=!0,r=!0,o=this.state,s=o.informalName,l=o.officialName,c=o.disasterType,d=o.isOngoing,u=o.latitude,f=o.longitude;if(""==s&&(t=!1),""==l&&(i=!1),"Please select"==c&&(n=!1),Object(h.q)(u)||(a=!1),Object(h.q)(f)||(r=!1),t&&i&&n&&a&&r){var m={id:this.disasterId};s.trim()!=this.originalInformalName&&(m.informal_name=s.trim()),l.trim()!=this.originalOfficialName&&(m.official_name=l.trim()),c.trim()!=this.originalDisasterType&&(m.disaster_type=c.charAt(0).toLowerCase()+c.slice(1)),d!=this.originalIsOngoing&&(m.is_ongoing=d),u!=this.originalLatitude&&(m.location_latitude=u),f!=this.originalLongitude&&(m.location_longitude=f),fetch("".concat(this.backEndHost,"/api/disasters"),{method:"PATCH",body:JSON.stringify(m),contentType:"application/json",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(h.j)(h.d)}}).then((function(e){return e.json()})).then((function(t){console.log(t),401!=t.error||"authorization issue - 401 Unauthorized: The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required."!=t.message||t.success?403!=t.error||"authorization incorrect permission - 403 Forbidden: You don't have the permission to access the requested resource. It is either read-protected or not readable by the server."!=t.message||t.success?(e.originalInformalName=t.informal_name,e.originalOfficialName=t.official_name,e.originalDisasterType=t.disaster_type.charAt(0).toUpperCase()+t.disaster_type.slice(1),e.originalIsOngoing=t.is_ongoing,e.originalLatitude=t.location[0].toString(),e.originalLongitude=t.location[1].toString()):e.setState({isModalOpen:!0,authorizationFailure:403}):e.setState({isModalOpen:!0,authorizationFailure:401})})).catch((function(t){console.log("Error fetching disaster with id ",e.disasterId),console.log(t)}))}this.setState({isValidInformalName:t,isValidOfficialName:i,isValidDisasterType:n,isValidLatitude:a,isValidLongitude:r})}},{key:"resetDisasterForm",value:function(){this.setState({informalName:this.originalInformalName,officialName:this.originalOfficialName,disasterType:this.originalDisasterType,isOngoing:this.originalIsOngoing,latitude:this.originalLatitude,longitude:this.originalLongitude,isValidInformalName:!0,isValidOfficialName:!0,isValidDisasterType:!0,isValidLatitude:!0,isValidLongitude:!0})}},{key:"onModalClose",value:function(){this.setState({isModalOpen:!1,authorizationFailure:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isValidInformalName,r=t.isValidOfficialName,o=t.isValidDisasterType,s=t.isValidLatitude,l=t.isValidLongitude,c=t.isModalOpen,f=t.authorizationFailure;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.xb,{children:Object(n.jsx)(d.v,{xs:"12",children:Object(n.jsxs)(d.k,{children:[Object(n.jsxs)(d.o,{children:[Object(n.jsx)("h4",{children:"Edit Disaster"}),Object(n.jsx)("div",{className:"top-information-text",children:Object(h.h)("edit disaster listings")})]}),Object(n.jsx)(d.l,{children:Object(n.jsxs)(d.K,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",children:[Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"text-input",children:"Informal Name"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[a&&Object(n.jsx)(d.T,{id:"text-input",name:"text-input",placeholder:"Text",value:this.state.informalName,onChange:this.onInformalNameChange.bind(this)}),!a&&Object(n.jsx)(d.T,{id:"text-input",invalid:!0,name:"text-input",placeholder:"Text",value:this.state.informalName,onChange:this.onInformalNameChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Informal name is blank or format is not recognized"}),Object(n.jsx)(d.M,{children:"The colloquial name of the disaster"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"text-input",children:"Official Name"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[r&&Object(n.jsx)(d.T,{id:"text-input",name:"text-input",placeholder:"Text",value:this.state.officialName,onChange:this.onOfficialNameChange.bind(this)}),!r&&Object(n.jsx)(d.T,{id:"text-input",invalid:!0,name:"text-input",placeholder:"Text",value:this.state.officialName,onChange:this.onOfficialNameChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Official name is blank or format is not recognized"}),Object(n.jsx)(d.M,{children:"The identifying name of the disaster"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"select",children:"Disaster Type"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[o&&Object(n.jsx)(d.yb,{custom:!0,name:"select",id:"select",value:this.state.disasterType,onChange:this.onDisasterTypeChange.bind(this),children:h.b.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))}),!o&&Object(n.jsx)(d.yb,{invalid:!0,custom:!0,name:"select",id:"select",value:this.state.disasterType,onChange:this.onDisasterTypeChange.bind(this),children:i.disasterTypes.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))}),Object(n.jsx)(d.bb,{children:"No disaster type is selected"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{tag:"label",sm:"3",className:"col-form-label",children:"Disaster Ongoing"}),Object(n.jsx)(d.v,{sm:"1",children:Object(n.jsx)(d.Ib,{id:"add-disaster-ongoing-switch",className:"mr-1",color:"danger",shape:"pill",checked:this.state.isOngoing,onChange:this.onIsOngoingChange.bind(this)})}),Object(n.jsx)(d.v,{sm:"3",children:Object(n.jsx)(d.db,{htmlFor:"add-disaster-ongoing-switch",children:this.state.isOngoing?"Yes":"No"})})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"email-input",children:"Latitude"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[s&&Object(n.jsx)(d.T,{type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.latitude,onChange:this.onLatitudeChange.bind(this)}),!s&&Object(n.jsx)(d.T,{invalid:!0,type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.latitude,onChange:this.onLatitudeChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Provided latitude is blank or format is not recognized"}),Object(n.jsx)(d.M,{className:"help-block",children:"The latitude of the disaster"})]})]}),Object(n.jsxs)(d.L,{row:!0,children:[Object(n.jsx)(d.v,{md:"3",children:Object(n.jsx)(d.db,{htmlFor:"email-input",children:"Longitude"})}),Object(n.jsxs)(d.v,{xs:"12",md:"9",children:[l&&Object(n.jsx)(d.T,{type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.longitude,onChange:this.onLongitudeChange.bind(this)}),!l&&Object(n.jsx)(d.T,{invalid:!0,type:"email",id:"email-input",name:"email-input",placeholder:"Disaster Latitude",value:this.state.longitude,onChange:this.onLongitudeChange.bind(this)}),Object(n.jsx)(d.bb,{children:"Provided longitude is blank or format is not recognized"}),Object(n.jsx)(d.M,{className:"help-block",children:"The longitude of the disaster"})]})]})]})}),Object(n.jsxs)(d.m,{children:[Object(n.jsxs)(d.f,{type:"submit",size:"sm",color:"primary",onClick:this.onSubmit.bind(this),children:[Object(n.jsx)(u.a,{name:"cil-scrubber"})," Submit"]}),Object(n.jsxs)(d.f,{type:"reset",size:"sm",color:"danger",onClick:this.resetDisasterForm.bind(this),children:[Object(n.jsx)(u.a,{name:"cil-ban"})," Reset"]})]})]})})}),Object(n.jsxs)(d.hb,{show:c,onClose:this.onModalClose.bind(this),children:[Object(n.jsx)(d.kb,{closeButton:!0,children:Object(n.jsx)(d.lb,{children:"Failure To Edit Disaster Listing"})}),Object(n.jsx)(d.ib,{children:Object(h.g)("edit disaster listings",f)}),Object(n.jsx)(d.jb,{children:Object(n.jsx)(d.f,{color:"secondary",onClick:function(){return e.onModalClose()},children:"OK"})})]})]})}}]),i}(c.a.Component);t.default=f}}]);
//# sourceMappingURL=12.129ba8a0.chunk.js.map